"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[1211],{55558:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ry});var n=a(96540),r=a(84593),l=a(94772),i=a(32649),o=a(71468),s=a(24180),c=a(98713),m=a(10933),d=a(93915),u=a(54552),y=a(74e3),p=a(77130),f=a(93764),v=a(66900),b=a(43581),A=a(40317),E=a(59051),g=a(73325),h=a(37806),I=a(43597),P=a(67687),S=a(20020),w=a(41084),O=a(12166),C=a(67056),R=a(90313),T=a(63078),M=a(58489),D=a(59154),k=a(50228),x=a(52312),L=a(31216),j=a(46772),N=a(53364),U=a(18697),F=a(28732),B=a(42464),H=a(98341),V=a(16726),z=a(92942),W=a(74486);const K=(0,n.createContext)({width:0,height:0,contentHeight:0,scrollTop:0,scrollLeft:0,onRequestScrollPosition(){}});function Q(){return(0,n.useContext)(K)}function q({children:e,width:t,height:a,contentHeight:r,scrollTop:l,scrollLeft:i,onRequestScrollPosition:o}){const s=(0,n.useMemo)((()=>({width:t,height:a,contentHeight:r,scrollTop:l,scrollLeft:i,onRequestScrollPosition:o})),[t,a,r,l,i,o]);return n.createElement(K.Provider,{value:s},e)}var $=a(2697);const G={container:"PrePlayMetadata-container-ud0cxN",attributionLogo:"PrePlayMetadata-attributionLogo-_fLKOF"};var J=Object.defineProperty,X=Object.defineProperties,_=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,a)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ae=(e,t)=>{for(var a in t||(t={}))Z.call(t,a)&&te(e,a,t[a]);if(Y)for(var a of Y(t))ee.call(t,a)&&te(e,a,t[a]);return e},ne=(e,t)=>X(e,_(t)),re=(e,t)=>{var a={};for(var n in e)Z.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Y)for(var n of Y(e))t.indexOf(n)<0&&ee.call(e,n)&&(a[n]=e[n]);return a};function le(e){const{attribution:t,attributionLogo:a}=e;return a?n.createElement("img",{className:G.attributionLogo,src:a}):t?n.createElement(W.A,{attribution:t}):null}function ie(e){const t=e,{metadataItem:a,showAttributionLogo:r,poster:l}=t,i=re(t,["metadataItem","showAttributionLogo","poster"]),o=Q(),s=(0,$.A)()||o.width>=800;return n.createElement("div",{className:G.container},n.createElement(F.OS,ne(ae({},i),{attributionLogo:r?le(a):null,poster:s?l:null,summaryLabelLess:(0,j.A)("Less"),summaryLabelMore:(0,j.A)("More")})))}function oe(e,t){switch(t){case f.QD.Movie:return 1===e?(0,j.A)("1 Movie"):(0,j.A)("{movieCount} Movies",{movieCount:e});case f.QD.Show:return 1===e?(0,j.A)("1 Show"):(0,j.A)("{showCount} Shows",{showCount:e});case f.QD.Season:return(0,j.A)("Seasons");case f.QD.Episode:return 1===e?(0,j.A)("1 Episode"):(0,j.A)("{episodeCount} Episodes",{episodeCount:e});case f.QD.Album:return 1===e?(0,j.A)("1 Album"):(0,j.A)("{albumCount} Albums",{albumCount:e});case f.QD.Track:return 1===e?(0,j.A)("1 Track"):(0,j.A)("{trackCount} Tracks",{trackCount:e});default:return 1===e?(0,j.A)("1 Item"):(0,j.A)("{itemCount} Items",{itemCount:e})}}var se=a(43280),ce=a(60180),me=a(88920);const de=function(e){const[t,a]=(0,n.useState)(0),r=(0,n.useRef)(null),l=(0,n.useCallback)((e=>{r.current=e,r.current&&a(r.current.offsetTop)}),[]);return(0,n.useEffect)((()=>{r.current&&a(r.current.offsetTop)}),[e]),[t,l]};var ue=a(91561),ye=a(22020),pe=a(38837),fe=a(84230);const ve=Object.assign({},{defaultFontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif',boldFontFamily:'"PlexCircular","Open Sans", -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif',smallFontSize:"12px",smallIconFontSize:"12px",defaultFontSize:"13px",defaultIconFontSize:"14px",largeFontSize:"15px",headerFontSize:"24px",lineHeightComputed:"1.71428571"},{hubTitleLineHeight:"24px"});var be=a(10544),Ae=a(49202),Ee=a(32996),ge=a(7339),he=a(35260);function Ie(e){const t=(0,o.wA)(),a=(0,o.d4)(he.A),r=(0,n.useMemo)((()=>e.every((e=>a.items[ge.R.getIdentity(e)]))),[e,a]),l=(0,n.useCallback)((()=>{t(ge.A.actions.selectItems({items:e}))}),[t,e]),i=(0,n.useCallback)((()=>{t(ge.A.actions.deselectItems({items:e}))}),[t,e]),s=(0,n.useCallback)((()=>{r?i():l()}),[r,i,l]);return{isSelectionActive:!!a.count,isSelected:r,onSelect:l,onDeselect:i,onToggleSelect:s}}var Pe=a(50304),Se=a(70687);const we={titleContainer:"PrePlayListTitle-titleContainer-aRl8Fh",selectButton:"PrePlayListTitle-selectButton-HQwiGj SelectButton-selectButton-_goGWp",selectedTitleContainer:"PrePlayListTitle-selectedTitleContainer-CyMOyk PrePlayListTitle-titleContainer-aRl8Fh"};function Oe({className:e=we.titleContainer,selectedClassName:t=we.selectedTitleContainer,selectButtonClassName:a=we.selectButton,isSelected:r=!1,isSelectable:l,onSelectPress:i,title:o}){return n.createElement("div",{className:r?t:e},l?n.createElement(Se.A,{className:a,isSelected:r,title:o,onPress:i}):null,n.createElement(Pe.A,null,o))}const Ce={trackList:"AlbumDisc-trackList-uHEYNk",titleContainer:"AlbumDisc-titleContainer-V4dLGw PrePlayListTitle-titleContainer-aRl8Fh",selectedTitleContainer:"AlbumDisc-selectedTitleContainer-vragGm PrePlayListTitle-selectedTitleContainer-CyMOyk PrePlayListTitle-titleContainer-aRl8Fh",selectButton:"AlbumDisc-selectButton-XNlWa_ PrePlayListTitle-selectButton-HQwiGj SelectButton-selectButton-_goGWp"};var Re=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,De=(e,t)=>{var a={};for(var n in e)Te.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Re)for(var n of Re(e))t.indexOf(n)<0&&Me.call(e,n)&&(a[n]=e[n]);return a};const ke={height:parseInt(fe.A.tableRowHeight,10)};function xe(e){var t,a=e,{item:r,title:l}=a,i=De(a,["item","title"]);const o=(0,Ee.A)(i),s=(0,n.useMemo)((()=>[Ae.Ej,Ae.sH,Ae.p0]),[]),{onToggleSelect:c,isSelected:m}=Ie(null!=(t=null==r?void 0:r.items)?t:[]);if(!r)return null;const d=l||(0,j.A)("Disc {discNumber}",{discNumber:r.index});return n.createElement("div",{ref:o.cellRef,style:o.style},n.createElement(Oe,{className:Ce.titleContainer,isSelectable:!0,isSelected:m,selectButtonClassName:Ce.selectButton,selectedClassName:Ce.selectedTitleContainer,title:d,onSelectPress:c}),n.createElement("div",{className:Ce.trackList},r.items.map(((e,t)=>{var a;return n.createElement(be.A,{key:e.key,cellIndex:t,hasTransientActionsCell:!0,index:null!=(a=e.index)?a:t,isVirtual:!1,item:e,style:ke,tableColumns:s})}))))}const Le={container:"AlbumDiscList-container-tHRsGb"};var je=Object.defineProperty,Ne=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,Ve=(e,t,a)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ze=(e,t)=>{for(var a in t||(t={}))Be.call(t,a)&&Ve(e,a,t[a]);if(Fe)for(var a of Fe(t))He.call(t,a)&&Ve(e,a,t[a]);return e},We=(e,t)=>Ne(e,Ue(t));const Ke=parseInt(fe.A.v4PagePadding,10),Qe=parseInt(fe.A.v4ListSpacing,10),qe=parseInt(fe.A.v4PrePlayListTitleGap,10),$e=parseInt(fe.A.v4PrePlayDividerHeight,10),Ge=parseInt(ve.hubTitleLineHeight,10),Je=parseInt(fe.A.tableRowHeight,10),Xe=Ge+qe+2*$e;function _e({className:e=Le.container,metadataItem:t}){var a;const{type:r,subtype:l}=t,[i,s]=(0,A.Ss)(),c=Q(),{descendantListSourceURI:m}=(0,o.d4)(ye.A),{totalSize:d,items:u=[]}=null!=(a=(0,ue.A)())?a:{},y=(0,n.useMemo)((()=>{var e;return null!=(e=u.reduce(((e,t)=>{const{parentIndex:a=1}=t,n=e[a];return n?n.items.push(t):e[a]={index:a,items:[t]},e}),[]).filter((()=>!0)))?e:[]}),[u]),p=1===y.length?oe(null!=d?d:0,f.QD.Track):void 0,v=(0,n.useMemo)((()=>function(e){const{overscan:t=0,outerPaddingTop:a=0,outerPaddingRight:n=0,outerPaddingBottom:r=0,outerPaddingLeft:l=0,getCellHeights:i}=e;let o,s;function c(e){const t=s.findIndex((t=>t>e)),a=s.length-1;return-1===t?a:Math.min(Math.max(0,t-1),a)}return{getListMeasurements(e,t){const{viewportWidth:c,viewportHeight:m}=e,d=c-(l+n);o=i(d),s=[];let u=a;return o.forEach((e=>{s.push(u),u+=e})),{width:d,height:o.reduce(((e,t)=>e+t),a+r),outerPaddingTop:a,outerPaddingRight:n,outerPaddingBottom:r,outerPaddingLeft:l,listTop:e.listTop,listLeft:e.listLeft,viewportWidth:c,viewportHeight:m}},getPositionForIndex(e,t){const{width:a}=t;return{column:1,row:e,cellX:l,cellY:s[e],cellWidth:a,cellHeight:o[e]}},getRangesForPosition(e,a,n,r){const{viewportHeight:l}=r,i=e+l-1,o=c(e-t*l),s=c(e),m=c(i),d=c(i+t*l);return{visibleStartIndex:(0,me.A)(s,n),visibleEndIndex:(0,me.A)(m,n),renderStartIndex:(0,me.A)(o,n),renderEndIndex:(0,me.A)(d,n)}}}}({overscan:1,getCellHeights:e=>y.map((e=>Xe+e.items.length*Je+Qe)),outerPaddingRight:Ke,outerPaddingLeft:Ke})),[y]),[b,E]=de(c.contentHeight),g=(0,n.useCallback)((e=>n.createElement(xe,We(ze({},e),{title:p}))),[p]);return m&&d?n.createElement("div",{ref:E,className:e},n.createElement(k.Ay,{containerKey:t.childrenKey,containerProvider:s,containerServer:i,containerSourceURI:m,containerSubtype:l,containerType:r,listStyle:se.T.Table},n.createElement(pe.Ay,{items:u},n.createElement(ce.A,{cellComponentFactory:g,items:y,layout:v,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop-b,totalSize:d,viewportHeight:c.height,viewportWidth:c.width})))):null}var Ye=a(20140);function Ze({children:e}){return n.createElement(Ye.BJ,{gap:"xl",orientation:["vertical","horizontal"],wrap:!0},e)}function et({children:e}){return n.createElement(Ye.BJ,{gap:"xs"},e)}var tt=a(46047),at=a(86357),nt=a(66438);function rt({metadataItem:e}){const{parentTitle:t}=e,a=(0,nt.A)(e,"parentKey");return a?n.createElement(at.N,{color:"inherit",font:"inherit",href:a},t):n.createElement(n.Fragment,null,t)}var lt=a(33260),it=a(94693),ot=a(62686),st=a(19367),ct=a(8065),mt=a(70187),dt=a(40853),ut=a(48326),yt=a(50326),pt=a(46335),ft=a(94396),vt=a(23406),bt=a(18356),At=a(84518),Et=a(954),gt=a(11129),ht=a(5292),It=a(11650),Pt=a(71178);function St({className:e,allowLink:t,metadataItem:a}){const{parentTitle:r}=a;return n.createElement("div",{className:e},n.createElement(It.A,{allowLink:t,metadataItem:a}),r?n.createElement(ht.A,null):null,n.createElement(Pt.A,{allowLink:t,metadataItem:a}))}var wt=a(174),Ot=a(93738),Ct=a(51171),Rt=a(69249),Tt=a(77981),Mt=a(85325),Dt=a(39579),kt=a(78920),xt=a(10810),Lt=a(19542),jt=a(14187),Nt=a(18477),Ut=a(61435),Ft=a(88941),Bt=a(19336),Ht=a(40650),Vt=a(45);var zt=Object.defineProperty,Wt=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Gt=(e,t,a)=>t in e?zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Jt=(e,t)=>{for(var a in t||(t={}))qt.call(t,a)&&Gt(e,a,t[a]);if(Qt)for(var a of Qt(t))$t.call(t,a)&&Gt(e,a,t[a]);return e};const Xt=parseInt(fe.A.trackCellPadding,10),_t=n.forwardRef((({style:e,index:t,isSortable:a,cellIndex:r,cellHeight:l,metadataItem:i,metadataItemState:s},c)=>{const[m,d]=(0,A.Ss)(),u=(0,o.d4)(ft.A),y=(0,o.d4)((0,Ot.A)(i,m)),p=(0,o.d4)((0,Ut.A)(Bt.C.AudioVideo,"isPaused")),{hoverRef:f,actionsMenuButtonID:v,isHovered:b,isActionsPending:E,isActionsVisible:g,isActionsMenuOpen:h,onActionsMenuClose:I,onActionsMenuCloseComplete:P,onActionsMenuToggle:S}=(0,wt.A)({server:m,provider:d,metadataItem:i,metadataItemState:s}),w=(0,n.useCallback)((e=>{e.preventDefault()}),[]),{type:O,subtype:C}=i,R=(0,Tt.Ay)(O,C),T=(0,Mt.A)({height:l-2*Xt,aspectRatio:R}),M=(0,kt.Ay)((D=Jt({},T),k={server:m,provider:d,url:(0,Dt.A)(i,{aspectRatio:R})},Wt(D,Kt(k))));var D,k;const x=g&&(0,Rt.v_)({server:m,provider:d,stableUser:u,metadataItem:i,metadataItemState:s});return n.createElement(Nt.A,{ref:(0,Ft.A)(c,f),isAlternate:!!(r%2),isHovered:b,style:e},n.createElement(bt.A,{"aria-label":(0,Ct.A)(i),keyAttribute:"parentKey",metadataItem:i}),n.createElement("div",{className:"MetadataTrackDetailsRow-overlay-y7n1HE"},n.createElement("div",{className:"MetadataTrackDetailsRow-container-eP8Y7k"},n.createElement("div",{className:"MetadataTrackDetailsRow-indexPlayContainer-pVuRb6"},y||x?null:t,n.createElement(vt.A,{isVisible:!y&&x,metadataItem:i}),y?n.createElement(Ht.A,{isPaused:p}):null),n.createElement("div",{className:"MetadataTrackDetailsRow-posterContainer-JEFWFf"},n.createElement(jt.A,Jt({src:M},T))),n.createElement("div",{className:"MetadataTrackDetailsRow-titleContainer-kjcaLc"},n.createElement(Et.A,{className:"MetadataTrackDetailsRow-title-Qri1K_",metadataItem:i}),n.createElement(St,{className:"MetadataTrackDetailsRow-subtitle-qdwCkB MetadataTrackDetailsRow-title-Qri1K_",metadataItem:i})),g?n.createElement("div",{className:"MetadataTrackDetailsRow-actions-gVyfG7"},a?n.createElement(Lt.A,{className:"MetadataTrackDetailsRow-reorderButton-ixmPF8 Link-link-vSsQW1",tabIndex:-1,title:(0,j.A)("Reorder"),onPress:w},n.createElement(Vt.A,null)):null,n.createElement(xt.A,{className:"MetadataTrackDetailsRow-actionsMenuButton-c6f58C Link-link-vSsQW1","data-testid":"metadataTrackMoreButton",id:v,isPending:E,onPress:S})):n.createElement(gt.A,{className:"MetadataTrackDetailsRow-duration-JeUj57",metadataItem:i}))),n.createElement(At.A,{actionsOverride:{isPlayVisible:!1},isOpen:h,metadataItem:i,target:v,onMenuClose:I,onMenuCloseComplete:P}))}));var Yt=a(66231),Zt=a(52562),ea=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable;const na=n.forwardRef(((e,t)=>{var a=e,{index:r,isSortable:l,item:i}=a,o=((e,t)=>{var a={};for(var n in e)ta.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&ea)for(var n of ea(e))t.indexOf(n)<0&&aa.call(e,n)&&(a[n]=e[n]);return a})(a,["index","isSortable","item"]);const s=(0,Yt.A)(null==i?void 0:i.sourceURI),c=(0,Ee.A)(o),{cellIndex:m,cellHeight:d}=o;return i?n.createElement(M.A,{metadataItem:i},n.createElement(pt.A,{metadataItem:i,metadataItemState:s},n.createElement(_t,{ref:(0,Ft.A)(t,c.cellRef),cellHeight:d,cellIndex:m,index:r,isSortable:l,metadataItem:i,metadataItemState:s,style:c.style}))):n.createElement(Zt.A,{ref:(0,Ft.A)(t,c.cellRef),index:m,style:c.style})}));var ra=a(78592),la=a(6164),ia=a(63606),oa=a(62865),sa=Object.defineProperty,ca=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,ua=(e,t,a)=>t in e?sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const ya=parseInt(fe.A.trackCellHeight,10),pa=function(e){return(0,oa.A)(((e,t)=>{for(var a in t||(t={}))ma.call(t,a)&&ua(e,a,t[a]);if(ca)for(var a of ca(t))da.call(t,a)&&ua(e,a,t[a]);return e})({rowHeight:ya,overscan:2},e))};var fa=a(4659);const va={divider:"PrePlayListDivider-divider-GDRaZg"};function ba({className:e=va.divider}){return n.createElement("div",{className:e})}const Aa={hubHeader:"PrePlayVerticalHub-hubHeader-TP8gZk VirtualHubScroller-hubHeader-vSW06t",showAllContainer:"PrePlayVerticalHub-showAllContainer-yNQlC8",belowHub:"PrePlayVerticalHub-belowHub-kuKDV6"};var Ea=Object.defineProperty,ga=Object.defineProperties,ha=Object.getOwnPropertyDescriptors,Ia=Object.getOwnPropertySymbols,Pa=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,wa=(e,t,a)=>t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Oa=(e,t)=>{for(var a in t||(t={}))Pa.call(t,a)&&wa(e,a,t[a]);if(Ia)for(var a of Ia(t))Sa.call(t,a)&&wa(e,a,t[a]);return e},Ca=(e,t)=>ga(e,ha(t));const Ra=parseInt(fe.A.v4PagePadding,10),Ta=3;function Ma({hub:e}){const{title:t,sourceURI:a,key:r,type:l,subtype:s,initialSize:c,random:m,style:d=se.T.List,context:u,isStale:y}=e,p=(0,o.wA)(),[f,v]=(0,A.Ss)(),b=Q(),[E,g]=de(b.contentHeight),[h,I]=(0,n.useState)(c<Ta?c:Ta),P=(0,n.useMemo)((()=>l===se.A.Track?pa({outerPaddingRight:Ra,outerPaddingLeft:Ra}):(0,ia.A)({outerPaddingRight:Ra,outerPaddingLeft:Ra})),[l]),S=(0,n.useMemo)((()=>(0,la.A)(a)),[a]),w=(0,o.d4)(S),O=null==w?void 0:w.items.length,C=null==w?void 0:w.totalSize,R=null==C||m?c:C,T=(0,n.useCallback)((e=>{p(ra.A.actions.fetchRangeRequested(Ca(Oa({},e),{server:f,provider:v,sourceURI:a})))}),[p,f,v,a]),M=(0,n.useCallback)((()=>{I(R)}),[R]),{isPlaceholder:D,placeholderItems:x}=(0,fa.A)({hub:e,size:O,totalSize:C,initialPageSize:Ta,onPageRequest:T});(0,n.useEffect)((()=>{!h&&O&&I(O<Ta?O:Ta)}),[O,h]),(0,n.useEffect)((()=>{y&&!m&&p(ra.A.actions.throttledRepopulateRequested({server:f,provider:v,sourceURI:a}))}),[p,y,v,m,f,a]);const L=(0,n.useCallback)((t=>l===se.A.Track?n.createElement(i.Ay,{key:t.key,column:t.column,row:t.row},n.createElement(na,Oa({index:t.cellIndex+1},t))):n.createElement(yt.A,Oa({isSummaryHidden:e.hubIdentifier===ut.P.OtherEditions},t))),[e.hubIdentifier,l]);return(D||R)&&w?n.createElement(i.Ay,{name:u},n.createElement(k.Ay,{containerKey:r,containerProvider:v,containerServer:f,containerSourceURI:w.sourceURI,containerSubtype:s,containerType:l,listStyle:d},n.createElement("div",{className:Aa.hubHeader},n.createElement(mt.A,{hub:e},t)),n.createElement(ba,null),n.createElement("div",{ref:g},n.createElement(ce.A,{cellComponentFactory:L,items:D?x:w.items,keyPropName:"listItemKey",layout:P,scrollLeft:b.scrollLeft,scrollTop:b.scrollTop-E,totalSize:D?x.length:h,viewportHeight:b.height,viewportWidth:b.width,onPageRequest:D?void 0:T})),n.createElement(ba,null),!D&&h<R?n.createElement("div",{className:Aa.showAllContainer},n.createElement(Lt.A,{onPress:M},(0,j.A)("Show All"))):null,n.createElement("div",{className:Aa.belowHub}))):null}var Da=a(35467),ka=a(69182);const xa={spinnerContainer:"PrePlayAugmentedHubsList-spinnerContainer-gT9hz_"};function La({hub:e}){const t=e.style===se.T.List?Ma:ct.A,{serverIdentifier:a,providerIdentifier:r}=(0,st.A)(e.sourceURI);return n.createElement(A.Ay,{machineIdentifier:a,providerIdentifier:r},n.createElement(t,{hub:e,hubTitleComponent:mt.A}))}function ja({metadataItem:e}){const{augmentationKey:t}=e,a=(0,o.wA)(),[r,l]=(0,A.Ss)(),{augmented:{hubs:i,isPending:s,isPopulated:c}}=(0,o.d4)(ye.A);return(0,n.useEffect)((()=>{t&&a(Da.A.actions.augmentedHubsFetchRequested({server:r,provider:l,augmentationKey:t}))}),[a,t,l,r]),t?!c&&s?n.createElement("div",{className:xa.spinnerContainer},n.createElement(ka.A,null)):n.createElement(dt.A,{hubComponent:La,hubs:i}):null}var Na=a(3339),Ua=a(34041);function Fa({hub:e}){const t=e.style===se.T.List?Ma:ct.A,{serverIdentifier:a,providerIdentifier:r}=(0,st.A)(e.sourceURI),l=e.hubIdentifier===ut.P.PlexCredits?2:void 0;return n.createElement(A.Ay,{machineIdentifier:a,providerIdentifier:r},n.createElement(t,{hub:e,hubTitleComponent:mt.A,titleCount:l}))}const Ba=(0,n.memo)((function({metadataItem:e,onScrollPositionReady:t}){const{key:a}=e,r=(0,o.wA)(),[l,i]=(0,A.Ss)(),{related:{hubs:s,isPopulated:c,error:m}}=(0,o.d4)(ye.A),d=(0,o.d4)(Na.A),{isEmbedded:u}=l,y=(0,n.useMemo)((()=>s.filter((e=>{if(!(null==e?void 0:e.source))return!0;const{providerIdentifier:t}=(0,st.A)(e.source);return t===Ua.oB||d.find((({identifier:e})=>e===t))}))),[s,d]);return(0,n.useEffect)((()=>{u||c||m||r(Da.A.actions.relatedHubsFetchRequested({server:l,provider:i,metadataKey:a}))}),[r,m,u,c,a,i,l]),(0,n.useEffect)((()=>{(u||c||m)&&t()}),[m,u,c,t]),u||m?null:c?n.createElement(dt.A,{hubComponent:Fa,hubs:y}):n.createElement("div",{className:"PrePlayRelatedHubsList-spinnerContainer-W_NQ13"},n.createElement(ka.A,null))}));var Ha=a(46910),Va=a(19396),za=a(31070),Wa=a(56556),Ka=a(3632),Qa=a(7537);function qa({metadataItem:e,tag:t}){const{metricsContextTuple:a}=(0,i.Mp)(),[r,l]=(0,A.Ss)(),s=(0,o.d4)((0,Wa.A)(r.machineIdentifier,l.identifier,e.librarySectionID)),c=(0,za.A)(e.type),m=(0,n.useMemo)((()=>t.role?(0,Ka.Ay)({tag:t,contentDirectory:s,server:r,provider:l,metadataItem:e}):r.isCloud?(0,Va.A)(r,l,s,{key:t.key,pageType:f.QD.Hub,context:(0,i.qq)(a)}):(0,Qa.A)({tag:t,contentDirectory:s,server:r,provider:l,metadataNumericType:c})),[t,r,s,l,c,e,a]);return m?n.createElement(at.N,{color:"inherit",font:"inherit",href:m},t.tag):n.createElement(Ha.E,{color:"inherit",font:"inherit"},t.tag)}function $a(e,t,a=3){const{[t]:r=[]}=e;return r.length?n.createElement(F.wl,{limit:a,showAllButtonFont:"inherit",showAllLabel:(0,j.A)("and more"),tags:r.map((t=>n.createElement(qa,{key:t.tag,metadataItem:e,tag:t})))}):null}var Ga=a(5977),Ja=a(60710),Xa=a(92658),_a=a(62321),Ya=a(89512),Za=a(89302),en=a(76557),tn=a(45045),an=a(3184);function nn({type:e,stream:t}){return n.createElement("span",null,t?t.displayTitle:n.createElement(n.Fragment,null,e===f.PT.Subtitles?(0,j.A)("Off"):(0,j.A)("None")))}var rn=a(14890);const ln={menuLabelClassName:"AudioStreamsMenu-menuLabelClassName-fLobh8 SelectedMenuItem-menuLabel-nQZtur",extendedTitle:"AudioStreamsMenu-extendedTitle-IoIJir"};function on({metadataItem:e,part:t,onSelect:a}){const r=(0,_a.A)(),l=(0,an.A)(),i=(0,Yt.A)(e.sourceURI),[o,s]=(0,n.useState)((0,tn.A)(i.Stream,t,f.PT.Audio)),c=(0,en.A)(t,f.PT.Audio),m=(0,n.useCallback)((e=>{const t=c.find((t=>t.id===e));s(t),a(f.Tj.Audio,e)}),[c,a]);return(0,n.useEffect)((()=>{i.isPending||s((0,tn.A)(i.Stream,t,f.PT.Audio))}),[i.Stream,i.isPending,t]),n.createElement(n.Fragment,null,c.length>1?n.createElement(Ga.A,{direction:l.isOpen?Ya.UP:Ya.PX,id:r,isSelected:!0,onPress:l.onToggle},n.createElement(nn,{stream:o,type:f.PT.Audio})):n.createElement(nn,{stream:o,type:f.PT.Audio}),n.createElement(Ja.A,{isOpen:l.isOpen,size:Za.I$,target:r,onMenuClose:l.onClose},c.map((e=>n.createElement(rn.A,{key:e.id,isSelected:e===o,menuLabelClassName:ln.menuLabelClassName,value:e.id,onSelect:(0,Xa.A)(m,l.onClose)},n.createElement(nn,{stream:e,type:f.PT.Audio}),e.title?n.createElement("span",{className:ln.extendedTitle},e.title):null)))))}var sn=a(20976),cn=a(22701),mn=a(31585),dn=a(94507),un=a(69380),yn=a(72630),pn=a(35123),fn=a(6678),vn=a(28008),bn=a(55513),An=a(56688),En=a(42508);const gn={externalMenuItemContainer:"SubtitlesStreamsMenu-externalMenuItemContainer-BgIZ1t",externalMenuItem:"SubtitlesStreamsMenu-externalMenuItem-qXHqYr SelectedMenuItem-menuItemContainer-PNDPtO",menuLabelClassName:"SubtitlesStreamsMenu-menuLabelClassName-v0ylMa SelectedMenuItem-menuLabel-nQZtur",externalDeleteButton:"SubtitlesStreamsMenu-externalDeleteButton-YytHSz IconButton-iconButton-ebkqws Link-link-vSsQW1",extendedTitle:"SubtitlesStreamsMenu-extendedTitle-PiynUL"};function hn({metadataItem:e,part:t,onSelect:a,onDelete:l}){var i;const[o,s]=(0,A.Ss)(),c=(0,Yt.A)(e.sourceURI),m=(0,an.A)(),d=(0,an.A)(),u=!!(0,pn.A)(s),y=!(!(null==(i=o.ownerFeatures)?void 0:i.some((e=>[cn.AS,cn.iy].includes(e))))||o.isShared||!(0,pn.A)(s)),p=(0,_a.A)(),v=(0,an.A)(),b=(0,an.A)(),[E,g]=(0,n.useState)(),[h,I]=(0,n.useState)((0,tn.A)(c.Stream,t,f.PT.Subtitles)),P=(0,en.A)(t,f.PT.Subtitles),S=(0,n.useCallback)((e=>{const t=P.find((t=>t.id===e));I(t),a(f.Tj.Subtitles,e)}),[a,P]),w=(0,n.useCallback)((()=>{E&&l(E)}),[l,E]);return(0,n.useEffect)((()=>{c.isPending||I((0,tn.A)(c.Stream,t,f.PT.Subtitles))}),[c.Stream,c.isPending,t]),(0,n.useEffect)((()=>{!c.isStreamDeletePending&&b.isOpen&&b.onClose()}),[c.isStreamDeletePending]),e.rentalPrice&&!(0,yn.A)(e,c)?P.length?n.createElement(n.Fragment,null,P.filter((e=>!!e.displayTitle)).map((e=>e.displayTitle)).join(", ")):n.createElement(n.Fragment,null,(0,j.A)("None")):n.createElement(n.Fragment,null,P.length||u||y?n.createElement(Ga.A,{direction:v.isOpen?Ya.UP:Ya.PX,id:p,isSelected:!0,onPress:v.onToggle},P.length?n.createElement(nn,{stream:h,type:f.PT.Subtitles}):(0,j.A)("None")):(0,j.A)("None"),n.createElement(Ja.A,{isAutoCloseDisabled:b.isOpen,isOpen:v.isOpen,size:Za.I$,target:p,onMenuClose:v.onClose},P.length?n.createElement(rn.A,{key:sn.x,isSelected:!h,value:sn.x,onSelect:(0,Xa.A)(S,v.onClose)},n.createElement(nn,{type:f.PT.Subtitles})):null,P.map((e=>{const t=!!e.key&&o.isFullOwnedServer;return n.createElement("div",{key:e.id,className:t?gn.externalMenuItemContainer:void 0},n.createElement(rn.A,{className:t?gn.externalMenuItem:void 0,isSelected:e===h,menuLabelClassName:gn.menuLabelClassName,value:e.id,onSelect:(0,Xa.A)(S,v.onClose)},n.createElement(nn,{stream:e,type:f.PT.Subtitles}),e.title?n.createElement("span",{className:gn.extendedTitle},e.title):null),t?n.createElement(n.Fragment,null,n.createElement(fn.A,{ariaLabel:(0,j.A)("Delete Subtitle"),className:gn.externalDeleteButton,iconComponent:En.A,onPress:(0,Xa.A)(b.onOpen,(()=>g(e.key)))}),n.createElement(vn.A,{confirmLabel:(0,j.A)("Delete"),isConfirmButtonSpinning:c.isStreamDeletePending,isOpen:b.isOpen,kind:dn.Ol,message:(0,j.A)("Are you sure you want to delete this subtitle file?"),metricsPage:r.jb,title:(0,j.A)("Delete Subtitle File"),onCancel:b.onClose,onConfirm:w})):null)})),u?n.createElement(mn.A,{onPress:(0,Xa.A)(m.onOpen,v.onClose)},(0,j.A)("Search...")):null,y?n.createElement(mn.A,{onPress:(0,Xa.A)(d.onOpen,v.onClose)},(0,j.A)("Upload...")):null),n.createElement(un.A,{metadataItem:e,metadataItemState:c},(({metadataItemEntityID:e,onMarkStale:t})=>n.createElement(n.Fragment,null,n.createElement(bn.A,{isOpen:m.isOpen,metadataItemEntityID:e,onModalClose:(0,Xa.A)(m.onClose,t)}),n.createElement(An.A,{isOpen:d.isOpen,metadataItemEntityID:e,onModalClose:(0,Xa.A)(d.onClose,t)})))))}var In=a(86587),Pn=a(92919),Sn=a(74927),wn=a(8178);function On(e){const t=(0,o.wA)(),[a,r]=(0,A.Ss)(),{items:l}=(0,M.B)(),i=(0,o.d4)((0,Sn.A)(Ua.IU,Ua.uc(r.identifier))),s=Ua.cK(r.identifier,Ua.OB),c=(0,n.useMemo)((()=>!(!s||!e.playableKey||1!==l.length)),[s,l.length,e.playableKey]),m=c&&l?l[0]:e,d=(0,Yt.A)(m.sourceURI),u=d.Stream,y=function(e){const t=e.Media;if(null==t?void 0:t.length)return 1===t.length?t[0]:Array.from(t).sort(((e,t)=>{var a,n,r,l;return(null!=(a=t.width)?a:0)-(null!=(n=e.width)?n:0)||(null!=(r=t.bitrate)?r:0)-(null!=(l=e.bitrate)?l:0)}))[0]}(m),p=(null==y?void 0:y.Part)&&y.Part[0],v=p?(0,tn.A)(u,p,f.PT.Video):void 0,b=!s||c;(0,n.useEffect)((()=>{if(p&&!u&&a.isCloud&&b){const e=c?i:r;if(!e)return;t(Pn.A.actions.fetchRequested({server:a,provider:e,metadataItem:m}))}}),[t,b,p,r,u,a,c,m,i]);const E=(0,n.useCallback)(((e,n)=>{(0,wn.A)(null!=p,"A part is required to select a stream");const l=c&&i;t(Pn.A.actions.streamSelectRequested({server:a,provider:l?i:r,sourceURI:m.sourceURI,part:p,streamIDParam:e,streamID:n,allParts:!0}))}),[p,i,t,a,c,r,m.sourceURI]),g=(0,n.useCallback)((e=>{t(Pn.A.actions.streamDeleteRequested({server:a,provider:r,sourceURI:m.sourceURI,streamKey:e}))}),[t,m.sourceURI,r,a]),h=m.Media&&m.Media.length>1&&(0,pn.A)(r)?m.Media.map((e=>{const{info:t,title:a}=(0,In.A)(e),n=!!(null==t?void 0:t.length);return a?n?`${a} (${t})`:a:n?t:(0,j.A)("Unknown")})):[];return p?b&&d.isPending&&!d.isPopulated?n.createElement(et,null,n.createElement(F.nT,{label:(0,j.A)("Video")},n.createElement(Ha.E,{color:"muted",font:"body-2"},(0,j.A)("Loading..."))),n.createElement(F.nT,{label:(0,j.A)("Audio")},n.createElement(Ha.E,{color:"muted",font:"body-2"},(0,j.A)("Loading..."))),n.createElement(F.nT,{label:(0,j.A)("Subtitles")},n.createElement(Ha.E,{color:"muted",font:"body-2"},(0,j.A)("Loading...")))):n.createElement(et,null,h.length?n.createElement(F.nT,{label:(0,j.A)("Versions")},n.createElement(F.wl,{limit:1,showAllLabel:(0,j.A)("and more"),tags:h})):null,n.createElement(F.nT,{label:(0,j.A)("Video")},n.createElement(nn,{stream:v,type:f.PT.Video})),n.createElement(F.nT,{label:(0,j.A)("Audio")},n.createElement(on,{metadataItem:m,part:p,onSelect:E})),n.createElement(F.nT,{label:(0,j.A)("Subtitles")},n.createElement(hn,{metadataItem:m,part:p,onDelete:g,onSelect:E}))):null}function Cn({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,duration:l,rating:i,summary:o,studio:s,year:c}=e,m=(0,z.A)(e),d=$a(e,"Genre"),u=$a(e,"Style"),y=On(e),p=!(!u&&!s);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isShuffleVisible","isAddToPlaylistVisible","isSyncDownloadVisible","isEditVisible"]}),facts:[c,l?(0,B.A)(l):void 0,r?(0,H.A)(r):void 0],genres:d,metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[i||a?n.createElement(V.A,{metadataItem:e}):null],showAttributionLogo:!0,starRating:m?n.createElement(lt.p,{metadataItem:e}):void 0,subtitle:(0,ot.A)(e),summary:o,title:n.createElement(rt,{metadataItem:e})},p||y?n.createElement(Ze,null,p?n.createElement(et,null,s?n.createElement(F.nT,{label:(0,j.A)("Record Label")},s):null,u?n.createElement(F.nT,{label:(0,j.A)("Style")},u):null):null,y):null),n.createElement(_e,{metadataItem:e}),n.createElement(ja,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var Rn=a(88055),Tn=a.n(Rn),Mn=a(1081),Dn=a(35907),kn=a(27020);const xn=function(e){return(0,Mn.Mz)(kn.A,(t=>{var a;const n={};for(const r of e)n[r]=null!=(a=t[r])?a:Tn()(Dn.A);return n}))};var Ln=a(78546),jn=a(92464),Nn=a(77985);function Un({metadataList:e,metadataItem:t}){var a,r;const l=(0,o.wA)(),[i,s]=(0,A.Ss)(),{type:c,subtype:m,skipChildren:d}=t,u=d?(0,jn.C)(c,m):(0,jn.o)(c,m),[y,p]=(0,n.useState)(!1),f=null!=(a=e.totalSize)?a:0,v=e.items.length,{onSelect:b,onToggleSelect:E,isSelected:g}=Ie(e.items);(0,n.useEffect)((()=>{y&&(v<f?l(ra.A.actions.fetchAllRequested({server:i,provider:s,sourceURI:e.sourceURI,includePaginationHeaders:(0,Ln.A)(s)})):b())}),[l,y,v,e.sourceURI,b,s,i,f]),(0,n.useEffect)((()=>{g&&p(!1)}),[g]);const h=(0,n.useCallback)((()=>{v<f?p(!y):E()}),[y,v,E,f]),I=oe(null!=(r=e.totalSize)?r:0,null!=u?u:c);return n.createElement(Oe,{isSelectable:(0,Nn.A)(s),isSelected:g||y,title:I,onSelectPress:h})}var Fn=Object.defineProperty,Bn=Object.defineProperties,Hn=Object.getOwnPropertyDescriptors,Vn=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,Wn=Object.prototype.propertyIsEnumerable,Kn=(e,t,a)=>t in e?Fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Qn=(e,t)=>{for(var a in t||(t={}))zn.call(t,a)&&Kn(e,a,t[a]);if(Vn)for(var a of Vn(t))Wn.call(t,a)&&Kn(e,a,t[a]);return e},qn=(e,t)=>Bn(e,Hn(t));const $n=parseInt(fe.A.v4PagePadding,10);function Gn({items:e,totalSize:t,viewportWidth:a,viewportHeight:r,scrollTop:l,scrollLeft:i,onPageRequest:o}){const s=(0,n.useMemo)((()=>(0,ia.A)({outerPaddingRight:$n,outerPaddingLeft:$n})),[]),c=(0,n.useCallback)((e=>n.createElement(yt.A,qn(Qn({},e),{isParentDetailHidden:!0}))),[]);return n.createElement(n.Fragment,null,n.createElement(ba,null),n.createElement(ce.A,{cellComponentFactory:c,items:e,keyPropName:"listItemKey",layout:s,scrollLeft:i,scrollTop:l,totalSize:t,viewportHeight:r,viewportWidth:a,onPageRequest:o}),n.createElement(ba,null))}var Jn=a(80010);function Xn({metadataList:e,metadataItem:t}){const{type:a,subtype:r,skipChildren:l}=t,i=l?(0,jn.C)(a,r):(0,jn.o)(a,r),o=oe((0,n.useMemo)((()=>e.items.filter((e=>!!(0,Jn.A)(e.Media))).length),[e.items]),null!=i?i:a);return n.createElement(Oe,{title:o})}var _n=a(72712),Yn=a(34066),Zn=a(95342),er=Object.defineProperty,tr=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable,rr=(e,t,a)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,lr=(e,t)=>{for(var a in t||(t={}))ar.call(t,a)&&rr(e,a,t[a]);if(tr)for(var a of tr(t))nr.call(t,a)&&rr(e,a,t[a]);return e};function ir({type:e,subtype:t,items:a,totalSize:r,viewportWidth:l,viewportHeight:i,scrollTop:s,scrollLeft:c,onPageRequest:m}){const d=(0,o.d4)(Zn.A),{containerMeta:u}=(0,k.Xw)(),y=(0,n.useMemo)((()=>(0,Yn.A)({listType:e,subtype:t,columnWidth:d,listStyle:se.T.PrePlayGrid,displayFields:null==u?void 0:u.DisplayFields,displayImages:null==u?void 0:u.DisplayImage})),[d,null==u?void 0:u.DisplayFields,null==u?void 0:u.DisplayImage,t,e]),p=(0,n.useCallback)((e=>n.createElement(_n.A,lr({},e))),[]);return n.createElement(ce.A,{cellComponentFactory:p,items:a,keyPropName:"listItemKey",layout:y,scrollLeft:c,scrollTop:s,totalSize:r,viewportHeight:i,viewportWidth:l,onPageRequest:m})}var or=a(32485),sr=a.n(or),cr=a(27780),mr=a(26927);let dr;var ur=a(76887),yr=a(93189);var pr=a(18360),fr=a(60939);const vr="MetadataSimpleDetailsRow-unwatchedCircle-S_NEKn",br=n.forwardRef((({style:e,cellIndex:t,metadataItem:a,metadataItemState:r},l)=>{const[i,s]=(0,A.Ss)(),c=(0,o.d4)(ft.A),m=(0,o.d4)((0,Ot.A)(a,i)),d=(0,o.d4)((0,Ut.A)(Bt.C.AudioVideo,"isPaused")),{hoverRef:u,actionsMenuButtonID:y,isHovered:p,isActionsPending:v,isActionsVisible:b,isActionsMenuOpen:E,onActionsMenuClose:g,onActionsMenuCloseComplete:h,onActionsMenuToggle:I}=(0,wt.A)({server:i,provider:s,metadataItem:a,metadataItemState:r}),{isSelected:P,isInSelectionRange:S,isSelectionActive:w,onToggleSelect:O}=(0,fr.A)({isHovered:p,metadataItem:a,metadataItemState:r}),C=(0,n.useMemo)((()=>S?"MetadataSimpleDetailsRow-rangeListRow-wZqarV ListRow-row-oh5MTV":P?"MetadataSimpleDetailsRow-selectedListRow-b7NijL ListRow-row-oh5MTV":void 0),[S,P]),R=!w&&b,T=(0,n.useCallback)((()=>{O()}),[O]),M=R&&(0,Rt.v_)({server:i,provider:s,stableUser:c,metadataItem:a,metadataItemState:r});return n.createElement(Nt.A,{ref:(0,Ft.A)(l,u),alternateClassName:C,className:C,isAlternate:!!(t%2),isHovered:p,style:e},(0,Nn.A)(s)?n.createElement(pr.A,{isInSelectionRange:S,isSelected:P,isVisible:P||S||p,title:(0,Ct.A)(a),onPress:T}):null,w?n.createElement(Lt.A,{className:"MetadataSimpleDetailsRow-selectOverlay-oQLfat Link-link-vSsQW1",onPress:T}):n.createElement(bt.A,{"aria-label":(0,Ct.A)(a),keyAttribute:"key",metadataItem:a}),n.createElement("div",{className:"MetadataSimpleDetailsRow-overlay-i6axK7"},n.createElement("div",{className:"MetadataSimpleDetailsRow-simpleSummaryContainer-HfmzEQ"},n.createElement("div",{className:"MetadataSimpleDetailsRow-indexPlayContainer-Vgsmos"},m||M?null:n.createElement(ur.A,{className:"MetadataSimpleDetailsRow-titleEpisodeIndex-zzDjti",metadataItem:a}),n.createElement(vt.A,{isVisible:!m&&M,metadataItem:a}),m?n.createElement(Ht.A,{isPaused:d}):null,function(e,t,a){return!function(e){return Ua.cK((0,yr.A)(e.identifier,e.providerIdentifier),Ua.IU)}(a)&&!(0,N.A)(e)&&(e.type===f.QD.Movie||e.type===f.QD.Episode)&&t.isPopulated&&!1!==t.saved}(a,r,s)?n.createElement(n.Fragment,null,r.viewOffset||r.viewCount?null:n.createElement("div",{className:vr}),r.viewOffset?n.createElement("div",{className:sr()(vr,"MetadataSimpleDetailsRow-isPartiallyWatched-Du016G")}):null):null),n.createElement("div",{className:"MetadataSimpleDetailsRow-titleAndSummaryContainer-jjqqtZ"},n.createElement("div",{className:"MetadataSimpleDetailsRow-titleContainer-m9y2F0"},n.createElement("div",{className:"MetadataSimpleDetailsRow-title-inM8GI"},a.title),R?n.createElement("div",{className:"MetadataSimpleDetailsRow-actions-tPG7hS"},n.createElement(xt.A,{"data-testid":"metadataRowMoreButton",id:y,isPending:v,onPress:I})):null),n.createElement("div",{className:"MetadataSimpleDetailsRow-summary-yMvPIn"},function(e,t){const{tagline:a,summary:n}=t;return a||((0,cr.A)(e.identifier)===mr.g3?function(e){if(!e)return"";dr||(dr=document.createElement("P")),dr.innerHTML=e;const t=dr.textContent;return dr.innerHTML="",t}(n):n)}(s,a))))),n.createElement(At.A,{actionsOverride:{isPlayVisible:!1},isOpen:E,metadataItem:a,target:y,onMenuClose:g,onMenuCloseComplete:h}))}));var Ar=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,hr=(e,t)=>{var a={};for(var n in e)Er.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Ar)for(var n of Ar(e))t.indexOf(n)<0&&gr.call(e,n)&&(a[n]=e[n]);return a};function Ir(e){var t=e,{item:a}=t,r=hr(t,["item"]);const l=(0,Yt.A)(null==a?void 0:a.sourceURI),i=(0,Ee.A)(r),{cellIndex:o}=r;return a?n.createElement(pt.A,{metadataItem:a,metadataItemState:l},n.createElement(br,{ref:i.cellRef,cellIndex:o,metadataItem:a,metadataItemState:l,style:i.style})):n.createElement(Zt.A,{index:o,style:i.style})}var Pr=Object.defineProperty,Sr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Cr=(e,t,a)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Rr=parseInt(fe.A.simpleSummaryCellHeight,10),Tr=parseInt(fe.A.v4PagePadding,10),Mr=function(e){return(0,oa.A)(((e,t)=>{for(var a in t||(t={}))wr.call(t,a)&&Cr(e,a,t[a]);if(Sr)for(var a of Sr(t))Or.call(t,a)&&Cr(e,a,t[a]);return e})({rowHeight:Rr,outerPaddingRight:Tr,outerPaddingLeft:Tr,overscan:2},e))},Dr={allEpisodesContainer:"PrePlaySimpleDetailsVirtualList-allEpisodesContainer-LsdVgo"};var kr=Object.defineProperty,xr=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Nr=(e,t,a)=>t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ur=(e,t)=>{for(var a in t||(t={}))Lr.call(t,a)&&Nr(e,a,t[a]);if(xr)for(var a of xr(t))jr.call(t,a)&&Nr(e,a,t[a]);return e};function Fr({items:e,totalSize:t,type:a,viewportWidth:r,viewportHeight:l,scrollTop:i,scrollLeft:o,onPageRequest:s}){const c=a===se.A.Episode,[m,d]=(0,n.useState)(c&&t>=3?3:t),u=(0,n.useMemo)((()=>Mr()),[]),y=(0,n.useCallback)((()=>{d(t)}),[t]),p=(0,n.useCallback)((e=>n.createElement(Ir,Ur({},e))),[]);return n.createElement(n.Fragment,null,n.createElement(ba,null),n.createElement(ce.A,{cellComponentFactory:p,items:e,keyPropName:"listItemKey",layout:u,scrollLeft:o,scrollTop:i,totalSize:m,viewportHeight:l,viewportWidth:r,onPageRequest:s}),n.createElement(ba,null),n.createElement("div",{className:Dr.allEpisodesContainer},m<t?n.createElement(Lt.A,{onPress:y},(0,j.A)("Show All Episodes")):null))}var Br=Object.defineProperty,Hr=Object.getOwnPropertySymbols,Vr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,Wr=(e,t,a)=>t in e?Br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Kr=(e,t)=>{for(var a in t||(t={}))Vr.call(t,a)&&Wr(e,a,t[a]);if(Hr)for(var a of Hr(t))zr.call(t,a)&&Wr(e,a,t[a]);return e};const Qr=parseInt(fe.A.v4PagePadding,10);function qr({items:e,totalSize:t,viewportWidth:a,viewportHeight:r,scrollTop:l,scrollLeft:i,onPageRequest:o}){const s=(0,n.useMemo)((()=>pa({outerPaddingRight:Qr,outerPaddingLeft:Qr})),[]),c=(0,n.useCallback)((e=>n.createElement(na,Kr({index:e.cellIndex+1},e))),[]);return n.createElement(n.Fragment,null,n.createElement(ba,null),n.createElement(ce.A,{cellComponentFactory:c,items:e,keyPropName:"listItemKey",layout:s,scrollLeft:i,scrollTop:l,totalSize:t,viewportHeight:r,viewportWidth:a,onPageRequest:o}),n.createElement(ba,null))}var $r=a(20466),Gr=a(98564),Jr=a(31012);const Xr={recordIconContainer:"RecordButton-recordIconContainer-j3gVTg PlayButton-playCircle-mkZ5qi",recordIcon:"RecordButton-recordIcon-Z04HyR"};var _r=Object.defineProperty,Yr=Object.getOwnPropertySymbols,Zr=Object.prototype.hasOwnProperty,el=Object.prototype.propertyIsEnumerable,tl=(e,t,a)=>t in e?_r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function al(e){var t=e,{iconContainerClassName:a=Xr.recordIconContainer,iconClassName:r=Xr.recordIcon}=t,l=((e,t)=>{var a={};for(var n in e)Zr.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Yr)for(var n of Yr(e))t.indexOf(n)<0&&el.call(e,n)&&(a[n]=e[n]);return a})(t,["iconContainerClassName","iconClassName"]);return n.createElement(Lt.A,((e,t)=>{for(var a in t||(t={}))Zr.call(t,a)&&tl(e,a,t[a]);if(Yr)for(var a of Yr(t))el.call(t,a)&&tl(e,a,t[a]);return e})({"aria-label":(0,j.A)("Record")},l),n.createElement("span",{className:a},n.createElement("span",{className:r})))}var nl=a(80125),rl=a(97943);const ll={overlay:"EPGSimpleSummaryRow-overlay-u9kSRm",titleContainer:"EPGSimpleSummaryRow-titleContainer-kQW9pa",primaryTitle:"EPGSimpleSummaryRow-primaryTitle-AX_CUS",secondaryTitle:"EPGSimpleSummaryRow-secondaryTitle-NFTD7k",nextAiringDate:"EPGSimpleSummaryRow-nextAiringDate-yU4LcE",separator:"EPGSimpleSummaryRow-separator-zxEoiC DashSeparator-separator-_3fMys",subscriptionIcon:"EPGSimpleSummaryRow-subscriptionIcon-KSQf2Z"},il=n.forwardRef((({style:e,cellIndex:t,metadataItem:a,metadataItemState:r},l)=>{const{metricsPage:s,metricsContextTuple:c}=(0,i.Mp)(),[m,d]=(0,A.Ss)(),u=(0,o.d4)(ft.A),y=(0,an.A)(),[p,f]=(0,nl.A)(),v=a&&(0,Rt.m8)({provider:d,server:m,stableUser:u,metadataItem:a,metadataItemState:r}),{summary:b}=a,{subscriptionID:E}=r;return n.createElement(Nt.A,{ref:(0,Ft.A)(l,f),isAlternate:!!(t%2),isHovered:p,style:e},n.createElement(bt.A,{"aria-label":(0,Ct.A)(a),keyAttribute:"key",metadataItem:a}),n.createElement("div",{className:ll.overlay},n.createElement("div",{className:ll.titleContainer},n.createElement("div",{className:ll.primaryTitle},n.createElement(Jr.A,{className:ll.titleEpisodeIndex,metadataItem:a}),n.createElement(ht.A,null),n.createElement(Et.A,{allowLink:!1,metadataItem:a})),n.createElement("div",{className:ll.secondaryTitle},E?n.createElement($r.A,{"aria-label":(0,j.A)("Recording Scheduled"),className:ll.subscriptionIcon}):null,n.createElement(Gr.A,{className:ll.nextAiringDate,metadataItem:a}),b?n.createElement(ht.A,{className:ll.separator}):null,b)),p&&v?n.createElement(al,{tabIndex:-1,onPress:y.onOpen}):null),n.createElement(un.A,{metadataItem:a,metadataItemState:r},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:l,onMarkStale:i})=>n.createElement(rl.A,{isOpen:y.isOpen,metadataItemEntityID:l,metricsProperties:{page:s,contextTuple:c},providerEntityID:t,serverEntityID:e,subscriptionType:r.grandparentSubscriptionType||r.subscriptionType||a.type,onModalClose:(0,Xa.A)(i,y.onClose)}))))}));var ol=Object.getOwnPropertySymbols,sl=Object.prototype.hasOwnProperty,cl=Object.prototype.propertyIsEnumerable,ml=(e,t)=>{var a={};for(var n in e)sl.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&ol)for(var n of ol(e))t.indexOf(n)<0&&cl.call(e,n)&&(a[n]=e[n]);return a};function dl(e){var t=e,{item:a}=t,r=ml(t,["item"]);const l=(0,Yt.A)(null==a?void 0:a.sourceURI),i=(0,Ee.A)(r),{cellIndex:o}=r;return a?n.createElement(pt.A,{metadataItem:a,metadataItemState:l},n.createElement(il,{ref:i.cellRef,cellIndex:o,metadataItem:a,metadataItemState:l,style:i.style})):n.createElement(Zt.A,{index:o,style:i.style})}var ul=Object.defineProperty,yl=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,vl=(e,t,a)=>t in e?ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,bl=(e,t)=>{for(var a in t||(t={}))pl.call(t,a)&&vl(e,a,t[a]);if(yl)for(var a of yl(t))fl.call(t,a)&&vl(e,a,t[a]);return e};const Al=96;function El({items:e,viewportWidth:t,viewportHeight:a,scrollTop:r,scrollLeft:l,onPageRequest:i}){const o=(0,n.useMemo)((()=>Mr({rowHeight:Al})),[]),s=(0,n.useCallback)((e=>n.createElement(dl,bl({},e))),[]),c=(0,n.useMemo)((()=>{const t=e.filter((e=>!!(0,Jn.A)(e.Media)));return t.sort(((e,t)=>{const a=(0,Jn.A)(e.Media),n=(0,Jn.A)(t.Media);return(null==a?void 0:a.endsAt)&&(null==n?void 0:n.endsAt)?a.endsAt>n.endsAt?1:-1:0})),t}),[e]),m=(0,n.useMemo)((()=>c.length),[c]);return n.createElement(n.Fragment,null,n.createElement(ba,null),n.createElement(ce.A,{cellComponentFactory:s,items:c,keyPropName:"listItemKey",layout:o,scrollLeft:l,scrollTop:r,totalSize:m,viewportHeight:a,viewportWidth:t,onPageRequest:i}),n.createElement(ba,null))}var gl=a(2230),hl=a(3104);const Il={listContainer:"PrePlayDescendantList-listContainer-RJzpLn"};var Pl=Object.defineProperty,Sl=Object.defineProperties,wl=Object.getOwnPropertyDescriptors,Ol=Object.getOwnPropertySymbols,Cl=Object.prototype.hasOwnProperty,Rl=Object.prototype.propertyIsEnumerable,Tl=(e,t,a)=>t in e?Pl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ml=(e,t)=>{for(var a in t||(t={}))Cl.call(t,a)&&Tl(e,a,t[a]);if(Ol)for(var a of Ol(t))Rl.call(t,a)&&Tl(e,a,t[a]);return e},Dl=(e,t)=>Sl(e,wl(t));function kl({className:e=Il.listContainer,metadataItem:t}){const a=(0,o.wA)(),[r,l]=(0,A.Ss)(),i=Q(),{descendantListSourceURI:s}=(0,o.d4)(ye.A),c=(0,o.d4)(hl.A),m=(0,o.d4)(gl.A),d=(0,ue.A)(),u=(0,n.useMemo)((()=>(null==d?void 0:d.items.map((e=>e.sourceURI)))||[]),[d]),y=(0,o.d4)(xn(u)),p=(0,n.useMemo)((()=>null==d?void 0:d.items.filter((({sourceURI:e})=>{var t;return!(null==(t=y[e])?void 0:t.isPopulated)}))),[y,d]),[f,v]=de(i.contentHeight);(0,n.useEffect)((()=>{r.isCloud&&(null==p?void 0:p.length)&&a(Pn.A.actions.batchFetchRequested({server:r,provider:l,metadataItems:p}))}),[a,l,r,p]);const b=(0,n.useCallback)((e=>{s&&a(ra.A.actions.fetchRangeRequested(Dl(Ml({},e),{server:r,provider:l,sourceURI:s})))}),[s,a,l,r]),E=function(e,t){switch(t){case se.T.PrePlayGrid:return ir;case se.T.Details:return Gn;case se.T.SimpleDetails:return(0,N.A)(e)?El:Fr;case se.T.TrackDetails:return qr}throw new Error("Failed to map the preplay descendant list style to a list component. Check `selectPrePlayDescendantListStyles` for list style options.")}(t,m);return s&&c&&d&&d.totalSize?n.createElement("div",{ref:v,className:e},n.createElement(k.Ay,{containerKey:t.childrenKey,containerProvider:l,containerServer:r,containerSourceURI:s,containerSubtype:t.subtype,containerType:c,listStyle:m},(0,Ln.A)(l)?n.createElement(Xn,{metadataItem:t,metadataList:d}):n.createElement(Un,{metadataItem:t,metadataList:d}),n.createElement(pe.Ay,{items:d.items},n.createElement(E,{items:d.items,scrollLeft:i.scrollLeft,scrollTop:i.scrollTop-f,subtype:t.subtype,totalSize:d.totalSize,type:c,viewportHeight:i.height,viewportWidth:i.width,onPageRequest:b})))):null}var xl=a(58459),Ll=a(7447),jl=Object.defineProperty,Nl=Object.defineProperties,Ul=Object.getOwnPropertyDescriptors,Fl=Object.getOwnPropertySymbols,Bl=Object.prototype.hasOwnProperty,Hl=Object.prototype.propertyIsEnumerable,Vl=(e,t,a)=>t in e?jl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,zl=(e,t)=>{for(var a in t||(t={}))Bl.call(t,a)&&Vl(e,a,t[a]);if(Fl)for(var a of Fl(t))Hl.call(t,a)&&Vl(e,a,t[a]);return e},Wl=(e,t)=>Nl(e,Ul(t)),Kl=(e,t)=>{var a={};for(var n in e)Bl.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Fl)for(var n of Fl(e))t.indexOf(n)<0&&Hl.call(e,n)&&(a[n]=e[n]);return a};function Ql(){const[e,t]=(0,A.Ss)(),{extrasSourceURI:a}=(0,o.d4)(ye.A),r=(0,n.useMemo)((()=>a?(0,la.A)(a):()=>{}),[a]),l=(0,o.d4)(r),i=(0,o.d4)(Zn.A),s=(0,n.useMemo)((()=>(0,xl.A)({listType:se.A.Clip,subtype:f.i9.Trailer,columnWidth:i})),[i]),c=(0,n.useCallback)((e=>{var t=e,{item:a}=t,r=Kl(t,["item"]);return n.createElement(_n.A,Wl(zl({},r),{isPlayButtonCard:!0,item:a}))}),[]);return l?n.createElement(k.Ay,{containerProvider:t,containerServer:e,containerSourceURI:l.sourceURI,containerSubtype:f.i9.Trailer,containerType:se.A.Clip},n.createElement(Ll.A,{cellComponentFactory:c,hub:{title:(0,j.A)("Extras"),sourceURI:l.sourceURI},items:l.items,keyPropName:"listItemKey",layout:s,totalSize:l.totalSize})):null}var ql=a(53356);const $l={container:"PrePlayPopularList-container-EuBOh2",moreContainer:"PrePlayPopularList-moreContainer-iQ4y2H"};var Gl=Object.defineProperty,Jl=Object.defineProperties,Xl=Object.getOwnPropertyDescriptors,_l=Object.getOwnPropertySymbols,Yl=Object.prototype.hasOwnProperty,Zl=Object.prototype.propertyIsEnumerable,ei=(e,t,a)=>t in e?Gl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ti=(e,t)=>{for(var a in t||(t={}))Yl.call(t,a)&&ei(e,a,t[a]);if(_l)for(var a of _l(t))Zl.call(t,a)&&ei(e,a,t[a]);return e},ai=(e,t)=>Jl(e,Xl(t));function ni({className:e=$l.container}){var t,a;const r=(0,o.wA)(),{popularLeavesSourceURI:l}=(0,o.d4)(ye.A),i=(0,n.useMemo)((()=>l?(0,la.A)(l):()=>{}),[l]),s=(0,o.d4)(i),c=Q(),[m,d]=de(c.contentHeight),[u,y]=(0,A.Ss)(),p=null!=(t=null==s?void 0:s.items.length)?t:0,v=null!=(a=null==s?void 0:s.totalSize)?a:p,b=null==s?void 0:s.sourceURI,[E,g]=(0,n.useState)(p<5?p:5),h=(0,n.useMemo)((()=>[Ae.DD,Ae.P8,Ae.sH,Ae.p0]),[]),I=(0,n.useMemo)((()=>(0,ql.A)()),[]),P=(0,n.useCallback)((e=>{b&&r(ra.A.actions.fetchRangeRequested(ai(ti({},e),{server:u,provider:y,sourceURI:b})))}),[b,r,u,y]),S=(0,n.useCallback)((()=>{const e=E+10;g(e>v?v:e)}),[v,E]),w=(0,n.useCallback)((e=>n.createElement(be.A,ti({hasTransientActionsCell:!0,index:e.cellIndex+1,tableColumns:h},e))),[h]);return s?n.createElement("div",{className:e},n.createElement(k.Ay,{containerProvider:y,containerServer:u,containerSourceURI:s.sourceURI,containerType:f.QD.Track},n.createElement(Oe,{title:(0,j.A)("Popular Tracks")}),n.createElement(ba,null),n.createElement("div",{ref:d},n.createElement(pe.Ay,{items:s.items},n.createElement(ce.A,{cellComponentFactory:w,items:s.items,keyPropName:"listItemKey",layout:I,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop-m,totalSize:E,viewportHeight:c.height,viewportWidth:c.width,onPageRequest:P}))),n.createElement(ba,null),n.createElement("div",{className:$l.moreContainer},E<v?n.createElement(Lt.A,{onPress:S},(0,j.A)("Show More")):null))):null}function ri({metadataItem:e,onScrollPositionReady:t}){const{summary:a}=e,r=(0,z.A)(e),l=$a(e,"Country"),i=$a(e,"Genre"),o=$a(e,"Style"),s=On(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isPlayRadioVisible","isAddToPlaylistVisible","isSyncDownloadVisible","isEditVisible"]}),facts:l,genres:i,metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),showAttributionLogo:!0,starRating:r?n.createElement(lt.p,{metadataItem:e}):void 0,summary:a,title:(0,ot.A)(e)},o||s?n.createElement(Ze,null,o?n.createElement(et,null,n.createElement(F.nT,{label:(0,j.A)("Style")},o)):null,s):null),n.createElement(ni,null),n.createElement(kl,{metadataItem:e}),n.createElement(Ql,null),n.createElement(ja,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}function li(e){return e.duration?(0,B.A)(e.duration):void 0}function ii({metadataItem:e,onScrollPositionReady:t}){const{contentRating:a,summary:r}=e,l=(0,z.A)(e),i=On(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible"]}),facts:[li(e),a?(0,H.A)(a):void 0],metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),showAttributionLogo:!0,starRating:l?n.createElement(lt.p,{metadataItem:e}):void 0,summary:r,title:(0,ot.A)(e)},i),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var oi=a(5079),si=a(58410),ci=a(57978),mi=a(47091),di=a(40961),ui=a(4152),yi=a(3047),pi=a(48403);const fi={listContainer:"PrePlayCuratedItemsList-listContainer-dkVFmY",dragLayer:"PrePlayCuratedItemsList-dragLayer-e6SIlz"};var vi=Object.defineProperty,bi=Object.defineProperties,Ai=Object.getOwnPropertyDescriptors,Ei=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable,Ii=(e,t,a)=>t in e?vi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Pi=(e,t)=>{for(var a in t||(t={}))gi.call(t,a)&&Ii(e,a,t[a]);if(Ei)for(var a of Ei(t))hi.call(t,a)&&Ii(e,a,t[a]);return e},Si=(e,t)=>bi(e,Ai(t)),wi=(e,t)=>{var a={};for(var n in e)gi.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Ei)for(var n of Ei(e))t.indexOf(n)<0&&hi.call(e,n)&&(a[n]=e[n]);return a};const Oi=parseInt(fe.A.v4PagePadding,10);function Ci(e){return e===se.T.TrackDetails?na:_n.A}const Ri="ListItem";function Ti(e){var t=e,{isScrolling:a,listStyle:r,onDragMove:l,onDragEnd:i}=t,o=wi(t,["isScrolling","listStyle","onDragMove","onDragEnd"]);const s=(0,n.useRef)(null),[,c]=(0,oi.H)({accept:Ri,hover(e,t){const n=e.metadataItem,r=o.item;!a&&n!==r&&r&&t.isOver()&&l({moveItem:n,moveIndex:e.index,toIndex:o.cellIndex})},collect:e=>({isOver:e.isOver()})}),[{isDragging:m},d,u]=(0,si.i)({type:Ri,item(){var e;return{index:o.cellIndex,metadataItem:null!=(e=o.item)?e:ui.A,size:{width:o.cellWidth,height:o.cellHeight}}},isDragging(e){var t;return(null==(t=o.item)?void 0:t.sourceURI)===e.getItem().metadataItem.sourceURI},collect:e=>({isDragging:e.isDragging()}),end(e){i({moveItem:e.metadataItem,moveIndex:e.index,toIndex:o.cellIndex})}});u((0,mi.n)()),d(c(s));const y=Ci(r);return n.createElement(y,Pi({ref:s,index:o.cellIndex+1,isSortable:!0,style:{opacity:m?0:1}},o))}function Mi({className:e=fi.listContainer,metadataItem:t}){var a;const r=(0,o.wA)(),[l,i]=(0,A.Ss)(),{containerMeta:s}=(0,k.Xw)(),c=Q(),{descendantListSourceURI:m}=(0,o.d4)(ye.A),d=(0,o.d4)(hl.A),u=(0,o.d4)(gl.A),y=(0,o.d4)(Zn.A),p=(0,pi.A)(c.scrollTop)!==c.scrollTop,f=(0,ue.A)(),[v,b]=(0,n.useState)(null!=(a=null==f?void 0:f.items)?a:[]);(0,n.useEffect)((()=>{var e;b(null!=(e=null==f?void 0:f.items)?e:[])}),[null==f?void 0:f.items]);const[E,g]=de(c.contentHeight),h=(0,n.useCallback)((e=>{m&&r(ra.A.actions.fetchRangeRequested(Si(Pi({},e),{server:l,provider:i,sourceURI:m})))}),[m,r,i,l]),I=(0,n.useMemo)((()=>u===se.T.TrackDetails?pa({outerPaddingRight:Oi,outerPaddingLeft:Oi}):d?(0,Yn.A)({listType:d,subtype:t.subtype,columnWidth:y,listStyle:se.T.PrePlayGrid,displayFields:null==s?void 0:s.DisplayFields,displayImages:null==s?void 0:s.DisplayImage}):void 0),[u,d,t.subtype,y,null==s?void 0:s.DisplayFields,null==s?void 0:s.DisplayImage]),P=(0,n.useCallback)((({moveItem:e,toIndex:t})=>{b((a=>{const n=a.findIndex((t=>t.sourceURI===e.sourceURI));if(n<0||t<0)return a;const r=Array.from(a),[l]=r.splice(n,1);return r.splice(t,0,l),r}))}),[]),S=(0,n.useCallback)((({moveItem:e,moveIndex:a,toIndex:n})=>{if(a<0||a===n)return;const o=v[n-1];r(yi.A.actions.moveItemRequested({server:l,provider:i,sourceURI:e.sourceURI,containerKey:t.key,ratingKey:e.ratingKey,afterID:o?o.ratingKey:void 0}))}),[r,t.key,v,i,l]),{currentOffset:w,dragItem:O}=(0,ci.V)((e=>e.getItemType()!==Ri?{}:{currentOffset:e.getSourceClientOffset(),dragItem:e.getItem()}));(0,n.useEffect)((()=>{const{height:e,scrollTop:t,onRequestScrollPosition:a}=c;if(!w)return;const n=.05*e,r=n,l=e-n;let i=0;w.y>l?i=50:w.y<r&&(i=-50),t+i!==t&&a({targetScrollTop:t+i})}),[w,c]);const C=(0,n.useCallback)((e=>n.createElement(Ti,Pi({isScrolling:p,listStyle:u,onDragEnd:S,onDragMove:P},e))),[p,u,P,S]);if(!(m&&d&&I&&f&&f.totalSize))return null;const R=Ci(u);return n.createElement("div",{ref:g,className:e},n.createElement(k.Ay,{containerKey:t.childrenKey,containerProvider:i,containerServer:l,containerSourceURI:m,containerSubtype:t.subtype,containerType:d,listStyle:u},n.createElement(Un,{metadataItem:t,metadataList:f}),n.createElement(pe.Ay,{items:v},u===se.T.TrackDetails?n.createElement(ba,null):null,n.createElement(ce.A,{cellComponentFactory:C,items:v,keyPropName:"listItemKey",layout:I,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop-E,totalSize:f.totalSize,viewportHeight:c.height,viewportWidth:c.width,onPageRequest:h}),u===se.T.TrackDetails?n.createElement(ba,null):null),w&&O?di.createPortal(n.createElement("div",{className:fi.dragLayer},n.createElement(R,{key:"dragItem",cellHeight:O.size.height,cellIndex:0,cellWidth:O.size.width,index:0,isVirtual:!1,item:O.metadataItem,style:Si(Pi({},O.size),{transform:`translate(${w.x}px, ${w.y}px)`})})),document.body):null))}function Di({minYear:e,maxYear:t}){const a=!(!e||!t||e===t);return a||t&&e===t?a?`${e} — ${t}`:t:void 0}function ki({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:l,smart:i,summary:o,title:s}=e,[c]=(0,A.Ss)(),m=(0,z.A)(e),d=On(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isPlayTrailerVisible","isShuffleVisible","isSyncDownloadVisible","isEditVisible"]}),facts:Di(e),metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[r?(0,H.A)(r):void 0,l||a?n.createElement(V.A,{key:"criticRating",metadataItem:e}):null],starRating:m?n.createElement(lt.p,{key:"userRating",metadataItem:e}):void 0,summary:o,title:s},d),i||!c.isFullOwnedServer?n.createElement(kl,{metadataItem:e}):n.createElement(Mi,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var xi=a(37548),Li=a(15348);function ji({allowLink:e=!0,metadataItem:t}){const a=(0,nt.A)(t,"key"),r=(0,nt.A)(t,"parentKey"),l=(0,Li.A)({seasonIndex:t.parentIndex,noLeadingZero:!0}),i=(0,xi.A)({episodeIndex:t.index,date:t.originallyAvailableAt,noLeadingZero:!0});return e&&a&&r?n.createElement(Ye.I1,null,t.index&&l?n.createElement(at.N,{href:r,title:t.parentTitle},l):null,t.index&&l?n.createElement(ht.A,{separator:"·"}):null,n.createElement(at.N,{href:a,title:t.title},i)):n.createElement(Ye.I1,null,t.index&&l?n.createElement(Ha.E,{color:"primary",font:"body-1",title:t.parentTitle},l):null,t.index&&l?n.createElement(ht.A,{separator:"·"}):null,n.createElement(Ha.E,{color:"primary",font:"body-1",title:t.title},i))}var Ni=a(95456),Ui=a(35416),Fi=a(37263),Bi=a(57055),Hi=a(93788),Vi=a(21267),zi=a(79393),Wi=a(54021),Ki=a(11348),Qi=a(46256),qi=a(19584),$i=a(95841),Gi=a(61641),Ji=a(86156),Xi=a(99049),_i=a(28518),Yi=a(17231),Zi=a(34398);const eo={menu:"EPGShowPrePlayActionBar-menu-B2nhRi PrePlayActionBar-menu-xDrJti Menu-menu-OCzudL"},to=["isRecordVisible","isPlayVisible","isShareVisible"];function ao({isPrimary:e,isDisabled:t,metadataItem:a}){const r=(0,o.wA)(),[l,s]=(0,A.Ss)(),c=(0,Yt.A)(a.sourceURI),m=(0,Jn.A)(a.Media),{metricsPage:d,metricsContextTuple:u}=(0,i.Mp)(),y=(0,n.useCallback)((()=>{r(Bi.gC({serverEntityID:l.entityID,providerEntityID:s.entityID,metricsPage:d,metricsContext:u,options:{type:zi.G_,identifier:null==m?void 0:m.channelIdentifier}}))}),[r,null==m?void 0:m.channelIdentifier,u,d,s.entityID,l.entityID]);return(0,n.useEffect)((()=>(Vi.A.on("shortcut:playSelected",y),()=>{Vi.A.off("shortcut:playSelected",y)}))),n.createElement(qi.A,{icon:Ni.default,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-play",title:(0,Ki.A)(a,c),onPress:y})}function no({metadataItem:e}){const t=(0,o.wA)(),a=(0,_a.A)(),r=(0,Fi.E)(),[l,i]=(0,A.Ss)(),s=(0,o.d4)(Hi.A),c=(0,o.d4)(ft.A),m=(0,o.d4)(Xi.A),d=(0,ue.A)(),u=null==d?void 0:d.items.find((e=>!!(0,Jn.A)(e.Media))),{favoriteChannels:y}=(0,o.d4)(Ji.A),p=(0,n.useMemo)((()=>!y.isPending&&!y.isPopulated&&!y.error),[y.error,y.isPending,y.isPopulated]),v=(0,_i.A)(Wi.v.IncludeSocialProof),b=(0,n.useRef)(null),E=(0,o.d4)(Qi.A),g=(0,Yt.A)(e.sourceURI),h=(0,n.useMemo)((()=>{var t;const a=(0,Rt.Ay)({server:l,provider:i,stableUser:c,metadataItem:e,metadataItemState:g,deviceSettings:E});if(!v&&a.isShareVisible&&delete a.isShareVisible,e.type===f.QD.Show)a.isPlayVisible=!0;else if(u){const{beginsAt:e,endsAt:n}=null!=(t=(0,Jn.A)(u.Media))?t:{},r=Math.floor(Date.now()/1e3);e&&n&&r>=e&&r<n&&(a.isPlayVisible=!0)}return a}),[E,v,e,g,u,i,l,c]);(0,n.useEffect)((()=>{p&&t(Gi.Ay.actions.favoriteChannelsFetchRequested({cloudServer:s}))}),[s,t,p]);const I=function(e){return Object.keys(e).reduce(((t,a)=>{const n=a;return t[n]=!to.includes(n)&&e[n],t}),{})}(h),P=Object.keys(I).some((e=>"isShareVisible"!==e&&I[e]));return 0===Object.keys(h).filter((e=>h[e])).length?null:n.createElement(Ye.BJ,{ref:b,align:["center","left"],gap:"xs",minHeight:40,orientation:"horizontal",wrap:!0},to.filter((e=>h[e])).map(((t,a)=>n.createElement($i.A,{key:t,errorComponent:Zi.A},"isPlayVisible"===t?n.createElement(ao,{isDisabled:m,isPrimary:0===a,metadataItem:null!=u?u:e}):null,"isPlayVisible"!==t?n.createElement(Yi.A,{action:t,isDisabled:m,isPrimary:0===a,metadataItem:e,metadataItemState:g}):null))),P?n.createElement(qi.A,{icon:Ui.default,id:a,isDisabled:m,isWaiting:y.isPending,testID:"preplay-more",title:(0,j.A)("More"),onPress:r.onOpen}):null,n.createElement(At.A,{actionsOverride:I,className:eo.menu,isOpen:r.isOpen,metadataItem:e,target:a,onMenuClose:r.onClose}))}var ro=a(85206),lo=a(5965);function io(e,t,a){const n=e/1e3;return a<n?(0,j.A)("Aired"):t<=n&&a>=n?(0,j.A)("Airing"):(0,j.A)("Airs")}function oo({metadataItem:e}){const t=(0,o.d4)((0,R.A)("timeFormat")),a=(0,lo.A)(),r=(0,Jn.A)(e.Media);if(!r)return null;const{Channel:l}=e,{videoResolution:i,beginsAt:s,endsAt:c,channelID:m}=r,d=null==l?void 0:l.find((e=>e.id===m));return n.createElement(et,null,i?n.createElement(F.nT,{label:(0,j.A)("Video")},function(e){const t=parseInt(e,10);return t>=720||4===t||8===t}(i)?(0,j.A)("HD"):(0,j.A)("SD")):null,null!=s&&null!=c?n.createElement(F.nT,{label:io(a,s,c)},(0,ro.A)({now:a,beginsAt:s,endsAt:c,channel:null==d?void 0:d.tag,timeFormat:t,showFullTime:!0,showChannel:!0})):null)}function so({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:l,summary:i}=e,o=(0,nt.A)(e,"grandparentKey");return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(no,{metadataItem:e}),facts:n.createElement(ji,{metadataItem:e}),genres:[li(e),r?(0,H.A)(r):void 0],metadataItem:e,poster:n.createElement(it.A,{aspectRatio:Tt.Yc,isChromaMetadata:!0,metadataItem:e}),ratings:[l||a?n.createElement(V.A,{metadataItem:e}):null],subtitle:(0,ot.A)(e),summary:i,title:o?n.createElement(at.N,{color:"inherit",font:"inherit",href:o},e.grandparentTitle):e.grandparentTitle},n.createElement(oo,{metadataItem:e})),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var co=a(42498),mo=a(4511),uo=a(76440),yo=a(21686),po=a(28829),fo=a(12063),vo=a(20846),bo=a(56642),Ao=a(91858);const Eo={placeholder:"PrePlayCastList-placeholder-Bnia6W ListRowPlaceholder-placeholder-g75gnX"};var go=Object.defineProperty,ho=Object.defineProperties,Io=Object.getOwnPropertyDescriptors,Po=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,Oo=(e,t,a)=>t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Co=(e,t)=>{for(var a in t||(t={}))So.call(t,a)&&Oo(e,a,t[a]);if(Po)for(var a of Po(t))wo.call(t,a)&&Oo(e,a,t[a]);return e},Ro=(e,t)=>ho(e,Io(t)),To=(e,t)=>{var a={};for(var n in e)So.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Po)for(var n of Po(e))t.indexOf(n)<0&&wo.call(e,n)&&(a[n]=e[n]);return a};const Mo=25,Do="viewAll";function ko(){const[e,t]=(0,A.Ss)(),a=(0,o.d4)(vo.A),r=a?(0,Ao.A)(e.machineIdentifier,t.identifier,{key:a.key,metadataType:a.type}):void 0;return n.createElement(Pe.A,{href:r},(0,j.A)("Cast & Crew"))}function xo(e){var t=To(e,[]);const a=(0,Ee.A)(t),{cellIndex:r}=t,l=(0,n.useMemo)((()=>(0,Mt.A)({width:t.cellWidth,aspectRatio:Tt.mH})),[t.cellWidth]);return n.createElement(Zt.A,{className:Eo.placeholder,index:r,style:Co(Co({},a.style),l)})}function Lo({metadataItem:e}){const[t,a,r]=(0,A.Ss)(),l=(0,o.wA)(),i=(0,o.d4)(Zn.A),{settings:s,isPending:c,isPopulated:m,error:u}=(0,o.d4)((0,co.A)(t.machineIdentifier,e.librarySectionID)),{credits:{isPending:y}}=(0,o.d4)(ye.A),p=(0,o.d4)(fo.A),{librarySectionID:f}=e,v=(0,n.useMemo)((()=>(0,xl.A)({listType:se.A.Person,columnWidth:i,titleCount:2})),[i]);(0,po.A)(),(0,n.useEffect)((()=>{t.isCloud||!f||c||m||u||l(mo.Ay.actions.fetchServerSectionSettings({server:t,librarySectionID:f}))}),[l,u,c,m,f,t]);const b=(0,n.useMemo)((()=>{if(y)return new Array(Mo);const e=(0,bo.Ay)(p),a=t.isCloud||!f||m||u?e:new Array(Mo);return a.length>Mo?[...a.slice(0,Mo),{tagKey:Do}]:a}),[p,u,y,m,f,t.isCloud]),E=(0,n.useCallback)((l=>{if(!l.item)return n.createElement(xo,Co({},l));if(l.item.tagKey===Do){const r=e?(0,Ao.A)(t.machineIdentifier,a.identifier,{key:e.key,metadataType:e.type}):void 0;return n.createElement(uo.A,Ro(Co({},l),{href:r}))}return n.createElement(yo.A,Ro(Co({},l),{contentDirectory:r,metadataItem:e,provider:a,server:t,serverSettings:s}))}),[r,e,a,t,s]);return n.createElement(Ll.A,{cellComponentFactory:E,hub:{sourceURI:d.A.join([e.sourceURI,"castList"])},hubTitleComponent:ko,items:b,layout:v,totalSize:b.length})}function jo({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:l,summary:i,year:o}=e,s=$a(e,"Genre");return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(no,{metadataItem:e}),facts:[o,li(e),r?(0,H.A)(r):void 0],genres:s,metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[l||a?n.createElement(V.A,{key:"criticRating",metadataItem:e}):null],summary:i,title:(0,ot.A)(e)},n.createElement(oo,{metadataItem:e})),n.createElement(Lo,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}function No({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:l,summary:i,title:o}=e,s=$a(e,"Genre"),c=On(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(no,{metadataItem:e}),genres:s,metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[r?(0,H.A)(r):void 0,l||a?n.createElement(V.A,{key:"criticRating",metadataItem:e}):null],summary:i,title:o},c),n.createElement(kl,{metadataItem:e}),n.createElement(Lo,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var Uo=a(60137);function Fo(e){const[t,a]=(0,A.Ss)(),n=(0,o.d4)(ft.A),r=(0,Yt.A)(null==e?void 0:e.sourceURI);return(0,Rt.zk)({server:t,provider:a,stableUser:n,metadataItem:e,metadataItemState:r})}var Bo=a(64739),Ho=a(37885),Vo=a(93455),zo=a(99686),Wo=a(11084),Ko=a(38815),Qo=a(83566),qo=a(14282),$o=a(86134),Go=a(54495),Jo=a(40500),Xo=a(19857),_o=a(66193),Yo=a(76528);function Zo(){const e=(0,j.A)("An unexpected error is impacting the Rate & Review action");return n.createElement(Yo.A,{errorMessage:`${e}.`,iconSize:"s",tooltipPlacement:"right"})}var es=a(85953),ts=a(97875),as=a(68436);const ns=function({metadataItem:e}){const t=(0,Fi.E)(),a=(0,Yt.A)(e.sourceURI),r=(0,n.useMemo)((()=>{var t;return null!=(t=(0,Ko.A)(e.guid))?t:""}),[e.guid]),{data:l,isLoading:i,error:o,refetch:s}=(0,as.Ks)({metadataID:r},{skip:!r}),c=(0,n.useMemo)((()=>{var e;return(null==l?void 0:l.metadataReview)?(0,ts.A)(l.metadataReview):null!=(e=a.userRating)?e:0}),[null==l?void 0:l.metadataReview,a.userRating]),m=(0,n.useCallback)((()=>{s()}),[s]),d=(0,n.useCallback)((()=>{t.onClose(),s()}),[s,t]);return i?null:o?a.userRating?n.createElement(lt.p,{key:"userRating",metadataItem:e}):n.createElement(Zo,null):n.createElement(n.Fragment,null,(null==l?void 0:l.metadataReview)&&"message"in l.metadataReview||a.userRating?n.createElement(Jo.$n,{font:"button-2",label:n.createElement(Ye.BJ,{gap:"xs",orientation:"horizontal"},n.createElement(Xo.G,{accessibilityLabel:(0,j.A)("Rated {rating} out of 10",{rating:c}),iconSize:"m",value:c}),(null==l?void 0:l.metadataReview)&&"message"in l.metadataReview?(0,j.A)("Reviewed {date}",{date:(0,_o.a)(l.metadataReview.date,!0)}):(0,j.A)("Add a review")),pill:!0,size:"xs",onPress:t.onToggle}):n.createElement(Jo.K0,{icon:"rate-review-filled",label:(0,j.A)("Rate & Review"),pill:!0,size:"xs",onPress:t.onToggle}),n.createElement(es.A,{metadataItem:e,metadataItemState:a,modalState:t,onRemoveSuccess:d,onSaveSuccess:m}))},rs=function({metadataItem:e}){const t=(0,o.wA)(),a=(0,o.d4)(Go.A),r=(0,o.d4)(Wo.A),l=(0,n.useMemo)((()=>`library/metadata/${(0,Ko.A)(e.guid)}`),[e.guid]),{isPending:i,isPopulated:s,error:c,item:{publicPagesURL:m}}=(0,o.d4)((0,$o.A)(l)),d=(0,z.A)(e),u=function(e){const[t,a]=(0,A.Ss)(),n=(0,o.d4)(ft.A),r=(0,Yt.A)(null==e?void 0:e.sourceURI),l=(0,_i.A)(Wi.v.IncludeDiscoverSource),{viewStateSync:{consent:i}}=(0,o.d4)(Qo.A);return!!(t.isCloud||"given"===i&&l)&&(0,Rt.TX)({server:t,provider:a,stableUser:n,metadataItem:e,metadataItemState:r})}(e);return(0,n.useEffect)((()=>{!u||!r||e.publicPagesURL||i||s||c||t(qo.A.actions.fetchMetadataItem({server:a,provider:r,key:l}))}),[t,i,s,u,e.publicPagesURL,c,r,l,a]),u&&!e.publicPagesURL&&i?null:u&&(e.publicPagesURL||s&&m)?n.createElement(ns,{key:"userReview",metadataItem:e}):d?n.createElement(lt.p,{key:"userRating",metadataItem:e}):null};var ls=a(42019),is=a(19594),os=a(60966),ss=a(41455),cs=a(9612),ms=a(19927);function ds({plexStats:e,metadataItem:t,height:a}){const r=(0,o.d4)((0,ms.A)(cn.eR)),l=function(e,t){if(t)return!e.isUnreleased||e.isUnreleased&&(e.type===f.QD.Episode||e.type===f.QD.Season)?{amount:null==t?void 0:t.watchedAmount,suffix:null==t?void 0:t.watchedSuffix,type:"watched"}:{amount:null==t?void 0:t.watchlistedAmount,suffix:null==t?void 0:t.watchlistedSuffix,type:"watchlisted"}}(t,e);if(!l||!r)return null;const{amount:i,suffix:s,type:c}=l;return i&&"0"!==i?n.createElement(Ye.BJ,{gap:"xs",height:a,orientation:"horizontal",verticalAlign:"center"},n.createElement(Ha.E,{color:"primary",font:"heading-2",numberOfLines:1},`${i}${s}`),"watched"===c?n.createElement(Ha.E,{color:"default",font:"body-2"},"1"!==i||s?(0,j.A)("people on Plex have watched this"):(0,j.A)("person on Plex has watched this")):null,"watchlisted"===c?n.createElement(Ha.E,{color:"default",font:"body-2"},"1"!==i||s?(0,j.A)("people on Plex have watchlisted this"):(0,j.A)("person on Plex has watchlisted this")):null):n.createElement(Ye.BJ,{gap:"xs",height:a,orientation:"horizontal",verticalAlign:"center"},n.createElement(cs.default,{size:"m"}),"watched"===c?n.createElement(Ha.E,{color:"default",font:"body-2"},(0,j.A)("Be the first person to watch this!")):null,"watchlisted"===c?n.createElement(Ha.E,{color:"default",font:"body-2"},(0,j.A)("Be the first person to watchlist this!")):null)}var us=a(58240);function ys(e,t,a){const n=null==t?void 0:t.length,r=t.map((({displayName:t,username:a,id:n})=>n===e?(0,j.A)("You"):t||a));return t&&n?n>3?(0,j.A)("Activity by {firstMention}, {secondMention} and {usersLeft} others",{firstMention:r[0],secondMention:r[1],usersLeft:a-2}):3===n?(0,j.A)("Activity by {firstMention}, {secondMention} and 1 other",{firstMention:r[0],secondMention:r[1]}):2===n?(0,j.A)("Activity by {firstMention} and {secondMention}",{firstMention:r[0],secondMention:r[1]}):(0,j.A)("Activity by {firstMention}",{firstMention:r[0]}):""}var ps=a(91389),fs=a(15635),vs=a(86112);const bs=function(e,t,a){const n=(0,fs.A)(e,t,ps.A.prePlayActivityFeed),r=(0,vs.A)(e,t);return"#!"+d.A.join((0,s.tW)(n,r),a)};var As=a(53059),Es=a(59485),gs=a(66963);const hs=(0,Es.A)("xxl");function Is({metadataItem:e}){const t=(0,os.A)(),a=(0,_i.A)(Wi.v.IncludeSocialProof),[r,l]=(0,A.Ss)(),i=(0,o.wA)(),{details:s}=(0,o.d4)(Qo.A),c=(0,As.o)(cn.p6),m=(0,n.useMemo)((()=>{var t;return null!=(t=(0,Ko.A)(e.guid))?t:""}),[e.guid]),{data:d,isLoading:u,error:y}=(0,gs.WZ)({metadataID:m,includeDescendants:!0,types:c?us.G:us.s},{skip:!m||!a||!!e.Channel,refetchOnMountOrArgChange:!0}),p=(0,n.useMemo)((()=>d?d.activityMentions.recentUsers.flatMap((e=>e.avatar||[])):[]),[d]),f=(0,n.useCallback)((()=>{i((0,ls.oo)({pathname:bs(r.machineIdentifier,l.identifier,{key:e.key})})),t({action:is.pT})}),[i,e.key,l.identifier,r.machineIdentifier,t]);return e.guid&&a?u||y?n.createElement("div",{style:{height:hs}}):p.length&&(null==d?void 0:d.activityMentions.recentUsers.length)?n.createElement(ss.A,{avatars:p,label:ys(s.uuid,d.activityMentions.recentUsers,d.activityMentions.uniqueUsersCount),numberOfLines:2,onPress:f}):n.createElement(ds,{height:hs,metadataItem:e,plexStats:null==d?void 0:d.activityMentions.plexStats}):null}const Ps={container:"StreamDetailPropertiesTable-container-vnpzQ6"};function Ss({children:e}){return n.createElement("div",{className:Ps.container},n.createElement(Ze,null,e))}var ws=a(79848),Os=a(19534),Cs=a(26308),Rs=a(3467),Ts=a(86592),Ms=Object.defineProperty,Ds=Object.defineProperties,ks=Object.getOwnPropertyDescriptors,xs=Object.getOwnPropertySymbols,Ls=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,Ns=(e,t,a)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Us=(e,t)=>{for(var a in t||(t={}))Ls.call(t,a)&&Ns(e,a,t[a]);if(xs)for(var a of xs(t))js.call(t,a)&&Ns(e,a,t[a]);return e},Fs=(e,t)=>Ds(e,ks(t));function Bs(e){const{metricsPage:t,metricsContextTuple:a}=(0,i.Mp)(),r=(0,n.useMemo)((()=>(0,h.A)(e)),[e]);return(0,n.useCallback)((e=>{(0,Rs.hd)("metrics").trackEvent({event:Ts.pM,page:t,interaction:!0,properties:{contextTuple:a,metadataItem:Fs(Us({},r),{service:e.title,serviceId:e.platform})}})}),[a,r,t])}var Hs=a(96563),Vs=a(3099);const zs="PrePlayAvailabilityItem-badge-OsI5kO";var Ws=Object.defineProperty,Ks=Object.defineProperties,Qs=Object.getOwnPropertyDescriptors,qs=Object.getOwnPropertySymbols,$s=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,Js=(e,t,a)=>t in e?Ws(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Xs=(e,t)=>{for(var a in t||(t={}))$s.call(t,a)&&Js(e,a,t[a]);if(qs)for(var a of qs(t))Gs.call(t,a)&&Js(e,a,t[a]);return e},_s=(e,t)=>Ks(e,Qs(t));const Ys=parseInt(fe.A.v4PrePlayAvailabilityWidth,10);function Zs({title:e,numberOfLines:t=1}){const a=Array.isArray(e)?e:[e];return n.createElement(n.Fragment,null,a.map(((e,a)=>n.createElement(Ha.E,{key:a,color:"muted",font:"body-3",numberOfLines:t},e))))}function ec({thumb:e,primaryTitle:t,secondaryTitle:a,tertiaryTitle:r}){return n.createElement(Ye.BJ,{gap:"m",orientation:"horizontal",verticalAlign:"center",width:Ys},n.createElement(Ye.BJ,{shrink:!1},e),n.createElement(Ye.BJ,null,t?n.createElement(Ha.E,{color:"primary",font:"body-3",numberOfLines:a?1:2},t):null,a?n.createElement(Zs,{numberOfLines:r?1:2,title:a}):null,r?n.createElement(Ha.E,{color:"muted",font:"body-3",numberOfLines:1},r):null))}const tc=(0,n.forwardRef)((function(e,t){const{thumb:a,badge:r,primaryTitle:l,secondaryTitle:i,href:o,target:s,onPress:c}=e,[m,d]=(0,n.useState)(!1),u=(0,n.useCallback)((()=>d(!0)),[]),y=(0,n.useCallback)((()=>d(!1)),[]),p={className:sr()("PrePlayAvailabilityItem-availabilityCell-KTf3LB Link-link-vSsQW1",m&&Vs.V),onBlur:y,onFocus:u},f=`${l||""}${l&&i?" • ":""}${i||""}`;return o?n.createElement(Hs.s8,_s(Xs({},p),{href:o,target:s,title:f,onPress:c}),r?n.createElement("div",{className:zs},r):null,n.createElement(ec,{primaryTitle:l,secondaryTitle:i,tertiaryTitle:e.tertiaryTitle,thumb:a})):n.createElement(Hs.al,_s(Xs({},p),{ref:t,title:f,onPress:c}),r?n.createElement("div",{className:zs},r):null,n.createElement(ec,{primaryTitle:l,secondaryTitle:i,tertiaryTitle:e.tertiaryTitle,thumb:a}))}));var ac=a(42136);function nc(e,t,a){return e.platform!==ac.yy&&a.isPopulated&&!a.watchlistedAt&&t.type===f.QD.Show}var rc=a(63737);function lc(e){switch(e.availability.offerType){case ac.cX.Free:return e.platform!==ac.yy?[(0,j.A)("Free")]:void 0;case ac.cX.Subscription:return[(0,j.A)("Subscription")];case ac.cX.Buy:case ac.cX.Rent:return[e.availability.buyPriceDescription?(0,j.A)("Buy {price}",{price:e.availability.buyPriceDescription}):void 0,e.availability.rentPriceDescription?(0,j.A)("Rent {price}",{price:e.availability.rentPriceDescription}):void 0].filter(Boolean);default:return}}const ic=function(e){return!!e&&"availabilities"in e};function oc(e){return ic(e)||e.availability.channelTitle?(0,j.A)("Free Live TV"):e.platform===ac.yy?e.availability.offerType===ac.cX.Free?(0,j.A)("Free On Demand"):(0,j.A)("On Demand"):e.title}var sc=a(14044);function cc(e){const t=ic(e)?e.availabilities[0]:e.availability;return(null==t?void 0:t.serverIdentifier)&&(null==t?void 0:t.providerIdentifier)&&(null==t?void 0:t.key)?(0,sc.A)(t.serverIdentifier,t.providerIdentifier,{key:t.key}):t.platformInfo.web.url}var mc=a(29943),dc=a(2043);const uc=function({className:e="LiveBadge-badge-ak80zJ"}){return n.createElement("div",{className:e},(0,j.A)("Live"))};var yc=a(83461),pc=a(14082),fc=a(38309),vc=a(19514),bc=a(95989),Ac=Object.defineProperty,Ec=Object.defineProperties,gc=Object.getOwnPropertyDescriptors,hc=Object.getOwnPropertySymbols,Ic=Object.prototype.hasOwnProperty,Pc=Object.prototype.propertyIsEnumerable,Sc=(e,t,a)=>t in e?Ac(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function wc(e){var t,a=e,{item:r,metadataType:l}=a,i=((e,t)=>{var a={};for(var n in e)Ic.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&hc)for(var n of hc(e))t.indexOf(n)<0&&Pc.call(e,n)&&(a[n]=e[n]);return a})(a,["item","metadataType"]);const s=(0,lo.A)(),c=(0,vc.A)(i),m=(0,o.d4)((0,R.A)("timeFormat"));return(null==(t=null==r?void 0:r.Media)?void 0:t.length)?n.createElement(Nt.A,{style:c.style},n.createElement(Ye.BJ,{gap:"s",paddingBottom:"s",width:"100%"},n.createElement(Ye.BJ,{gap:"none",paddingX:"m"},null!=r.index&&null!=r.parentIndex&&l!==f.QD.Episode?n.createElement(Ha.E,{font:"heading-4"},(0,fc.A)({seasonIndex:r.parentIndex,episodeIndex:r.index,noLeadingZero:!0,separator:" · ",includeSpecials:!0})):null,n.createElement(Ha.E,{color:"muted",font:"body-2"},(0,ro.A)({now:s,beginsAt:r.Media[0].beginsAt,endsAt:r.Media[0].endsAt,timeFormat:m})),n.createElement(Ha.E,{color:"muted",font:"body-2"},r.channelTitle)),n.createElement(yc.c,{size:"s"}))):null}const Oc=function({modalState:e,metadataItem:t,availabilities:a}){const r=(0,n.useMemo)((()=>e=>{return n.createElement(wc,(a=((e,t)=>{for(var a in t||(t={}))Ic.call(t,a)&&Sc(e,a,t[a]);if(hc)for(var a of hc(t))Pc.call(t,a)&&Sc(e,a,t[a]);return e})({},e),r={metadataType:t.type},Ec(a,gc(r))));var a,r}),[t.type]),l=(0,n.useMemo)((()=>(0,oa.A)({rowHeight:t.type===f.QD.Show||t.type===f.QD.Season?89:65})),[t.type]),i=(0,n.useMemo)((()=>{switch(t.type){case f.QD.Episode:return`${t.grandparentTitle} - ${(0,fc.A)({seasonIndex:t.parentIndex,episodeIndex:t.index,noLeadingZero:!0,separator:" · ",includeSpecials:!0})}`;case f.QD.Season:return`${t.parentTitle} - ${t.title}`;default:return t.title}}),[t.type,t.grandparentTitle,t.parentIndex,t.index,t.parentTitle,t.title]);return n.createElement(pc.aF,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},n.createElement(pc.$m,{closeButtonAccessibilityLabel:(0,j.A)("Close Upcoming Airings Modal"),title:(0,j.A)("Upcoming Airings of {title}",{title:i})},n.createElement(pc.cw,null,n.createElement(bc.A,{cellComponentFactory:r,items:a,layout:l,scrollDirection:O.D.Vertical,totalSize:a.length})),n.createElement(pc.jl,null,n.createElement(pc.Xd,null,n.createElement(pc.s_,null,n.createElement(Jo.$n,{label:(0,j.A)("Close")}))))))},Cc=function(e,t){const a=e.availabilities.length;return a>1?e.isPlayable?(0,j.A)("{airingsCount} airings",{airingsCount:a}):(0,j.A)("{airingsCount} upcoming airings",{airingsCount:a}):1===a&&e.availabilities[0].index&&e.availabilities[0].parentIndex&&t.type!==f.QD.Episode?(0,fc.A)({seasonIndex:e.availabilities[0].parentIndex,episodeIndex:e.availabilities[0].index,noLeadingZero:!0,separator:" · ",includeSpecials:!0}):void 0},Rc="ProviderAvailabilityItem-thumb-x9MXZE",Tc="ProviderAvailabilityItem-badge-g4cD5o LiveBadge-badge-ak80zJ";var Mc=Object.defineProperty,Dc=Object.defineProperties,kc=Object.getOwnPropertyDescriptors,xc=Object.getOwnPropertySymbols,Lc=Object.prototype.hasOwnProperty,jc=Object.prototype.propertyIsEnumerable,Nc=(e,t,a)=>t in e?Mc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Uc=(e,t)=>{for(var a in t||(t={}))Lc.call(t,a)&&Nc(e,a,t[a]);if(xc)for(var a of xc(t))jc.call(t,a)&&Nc(e,a,t[a]);return e};const Fc=parseInt(fe.A.v4PrePlayAvailabilityThumbSize,10);function Bc(e){var t=e,{item:a,metadataItem:r}=t,l=((e,t)=>{var a={};for(var n in e)Lc.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&xc)for(var n of xc(e))t.indexOf(n)<0&&jc.call(e,n)&&(a[n]=e[n]);return a})(t,["item","metadataItem"]);const[i,o]=(0,A.Ss)(),s=(0,Ee.A)(l),c=(0,Fi.E)(),m=(0,kt.Ay)({width:Fc,height:Fc,server:i,provider:o,url:a.thumb}),{onPlayPress:d,playModal:u}=(0,dc.A)(r),y=(0,n.useCallback)((()=>{a.isPlayable?d():c.onOpen()}),[c,a.isPlayable,d]);return n.createElement("div",{ref:s.cellRef,style:s.style},n.createElement(tc,{badge:a.isPlayable?n.createElement(uc,{className:Tc}):null,primaryTitle:oc(a),secondaryTitle:a.isPlayable&&1===a.availabilities.length?a.availabilities[0].channelTitle:void 0,tertiaryTitle:Cc(a,r),thumb:n.createElement(jt.A,{className:Rc,height:Fc,src:m,width:Fc}),onPress:y}),a.isPlayable?null:n.createElement(Oc,{availabilities:a.availabilities,metadataItem:r,modalState:c}),u)}const Hc=function(e){if(!e.item.isPlayable)return n.createElement(Bc,Uc({},e));const t=e.item.availabilities.reduce(((t,a)=>{if(a.playableKey){const l=(0,st.A)(a.playableKey);t.push((n=Uc({},ui.A),r={type:e.metadataItem.type===f.QD.Show?f.QD.Episode:e.metadataItem.type,title:a.title,index:a.index,parentIndex:a.parentIndex,Media:a.Media,playableKey:a.playableKey,sourceURI:(0,mc.A)({serverIdentifier:l.serverIdentifier,providerIdentifier:l.providerIdentifier})},Dc(n,kc(r))))}var n,r;return t}),[]);return n.createElement(M.A,{metadataItem:e.metadataItem,playableItems:t},n.createElement(Bc,Uc({},e)))};var Vc=Object.defineProperty,zc=Object.defineProperties,Wc=Object.getOwnPropertyDescriptors,Kc=Object.getOwnPropertySymbols,Qc=Object.prototype.hasOwnProperty,qc=Object.prototype.propertyIsEnumerable,$c=(e,t,a)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Gc=(e,t)=>{for(var a in t||(t={}))Qc.call(t,a)&&$c(e,a,t[a]);if(Kc)for(var a of Kc(t))qc.call(t,a)&&$c(e,a,t[a]);return e},Jc=(e,t)=>zc(e,Wc(t)),Xc=(e,t)=>{var a={};for(var n in e)Qc.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Kc)for(var n of Kc(e))t.indexOf(n)<0&&qc.call(e,n)&&(a[n]=e[n]);return a};const _c=parseInt(fe.A.v4PrePlayAvailabilityThumbSize,10);function Yc(e){var t=e,{addToWatchlistModalState:a,item:r,metadataItem:l,isAnonymousUser:i}=t,s=Xc(t,["addToWatchlistModalState","item","metadataItem","isAnonymousUser"]);const c=(0,o.wA)(),[m,d]=(0,A.Ss)(),u=(0,Ee.A)(s),y=Bs(l),p=(0,Yt.A)(l.sourceURI),f=(0,Fi.E)(),v=(0,o.d4)(Cs.A),b=(0,n.useMemo)((()=>!r.availability.providerIdentifier||v.includes(r.availability.providerIdentifier)),[r.availability.providerIdentifier,v]),E=(0,kt.Ay)({width:_c,height:_c,server:m,provider:d,url:r.thumb}),g=cc(r),h=(0,n.useCallback)((()=>{c((0,ls.oo)({pathname:g,replace:!1}))}),[c,g]),I=(0,n.useCallback)((()=>{b?(!i&&nc(r.availability,l,p)&&a.onOpen(),y(r.availability)):f.onOpen()}),[b,i,r.availability,l,p,y,f,a]),P=oc(r),S=lc(r);return n.createElement("div",{ref:u.cellRef,style:u.style},n.createElement(tc,{href:b?g:void 0,primaryTitle:P,secondaryTitle:S,target:r.platform!==ac.yy?"_blank":void 0,thumb:n.createElement(jt.A,{className:Rc,height:_c,src:E,width:_c}),onPress:I}),r.availability.providerIdentifier?n.createElement(rc.A,{modalState:f,providerIdentifier:r.availability.providerIdentifier,onOptInFinished:h}):null)}const Zc=function(e){const t=e,{addToWatchlistModalState:a,item:r,metadataItem:l,isAnonymousUser:i}=t,o=Xc(t,["addToWatchlistModalState","item","metadataItem","isAnonymousUser"]);return ic(r)?n.createElement(Hc,Jc(Gc({},o),{item:r,metadataItem:l})):n.createElement(Yc,Jc(Gc({},o),{addToWatchlistModalState:a,isAnonymousUser:i,item:r,metadataItem:l}))};var em=a(55212),tm=a(91894);const am=parseInt(fe.A.v4PrePlayAvailabilityThumbSize,10),nm=function(){const[e,t]=(0,A.Ss)(),a=(0,o.d4)((0,tm.A)(e.machineIdentifier)),r=(0,kt.Ay)({server:e,width:am,height:am,url:a,provider:t});return n.createElement(jt.A,{className:"PrePlayServerAvailabilityThumb-circle-NTjGL9",durationMilliseconds:0,height:am,src:r,width:am})};var rm=Object.getOwnPropertySymbols,lm=Object.prototype.hasOwnProperty,im=Object.prototype.propertyIsEnumerable;const om=function(e){var t,a=e,{metadataItem:r}=a,l=((e,t)=>{var a={};for(var n in e)lm.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&rm)for(var n of rm(e))t.indexOf(n)<0&&im.call(e,n)&&(a[n]=e[n]);return a})(a,["metadataItem"]);const i=(0,Ee.A)(l),[o]=(0,A.Ss)(),s=(0,nt.A)(r,"key"),c=(0,em.A)(o,null==(t=r.Media)?void 0:t[0]),m=(0,n.useMemo)((()=>{if(r.type===f.QD.Show)switch(r.childCount){case null:return;case 1:return(0,j.A)("{seasonCount} season",{seasonCount:r.childCount});default:return(0,j.A)("{seasonCount} seasons",{seasonCount:r.childCount})}if(c||r.editionTitle)return c&&r.editionTitle?`${c} • ${r.editionTitle}`:c||r.editionTitle}),[r,c]);return s?n.createElement("div",{ref:i.cellRef,style:i.style},n.createElement(tc,{href:s,primaryTitle:o.friendlyName,secondaryTitle:m,thumb:n.createElement(nm,null)})):null};var sm=a(27705),cm=a(75443);function mm({metadataItem:e,modalState:t}){const[a,r]=(0,A.Ss)(),l=(0,o.wA)(),i=(0,o.d4)(ft.A),s=(0,cm.A)(e,sm.PRE_PLAY),c=(0,n.useCallback)((()=>{l(Pn.A.actions.toggleWatchlistRequested({server:a,provider:r,stableUser:i,sourceURI:e.sourceURI,ratingKey:e.ratingKey,added:!0})),s(!0),t.onClose()}),[l,e.ratingKey,e.sourceURI,t,r,a,i,s]);return n.createElement(pc.aF,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(pc.$m,{closeButtonAccessibilityLabel:(0,j.A)("Close"),size:"s",title:(0,j.A)("Add {title} To Your Watchlist?",{title:e.title}),onClose:t.onClose},n.createElement(pc.cw,null,n.createElement(Ye.BJ,{gap:"m"},n.createElement(Ha.E,null,(0,j.A)("By adding a title to your Watchlist you can quickly access it anytime.")),n.createElement(Ha.E,null,(0,j.A)("You can also easily remove items from your Watchlist on the details page or via the context menu on the poster in content rows.")))),n.createElement(pc.jl,null,n.createElement(pc.Xd,null,n.createElement(Jo.$n,{label:(0,j.A)("No thanks"),onPress:t.onClose}),n.createElement(Jo.$n,{color:"accent",label:(0,j.A)("Add to Watchlist"),onPress:c})))))}var dm=a(66759),um=a(40442),ym=a(88310);const pm={sectionTitle:"ProviderMetadataAvailabilitiesModal-sectionTitle-EB0bHL",availabilityContainer:"ProviderMetadataAvailabilitiesModal-availabilityContainer-iPr_4x",availabilityItemContent:"ProviderMetadataAvailabilitiesModal-availabilityItemContent-bdwXeu",platformThumb:"ProviderMetadataAvailabilitiesModal-platformThumb-KuaxL4",badge:"ProviderMetadataAvailabilitiesModal-badge-n2L9BS LiveBadge-badge-ak80zJ"};function fm({item:e,metadataItem:t}){var a,r;if(!ic(e))return n.createElement(Ye.BJ,{align:"right",shrink:!1},null==(a=lc(e))?void 0:a.map(((e,t)=>n.createElement(Ha.E,{key:t,font:"body-3"},e))));let l;if(!e.isPlayable||e.availabilities.length>1)l=n.createElement(Ha.E,{font:"body-3"},Cc(e,t));else{const t=e.availabilities[0],{beginsAt:a,endsAt:i}=null!=(r=(0,Jn.A)(t.Media))?r:{},o=Math.floor(Date.now()/1e3),s=a&&i&&o>=a&&o<i;l=n.createElement(n.Fragment,null,s?n.createElement(uc,{className:pm.badge}):null,n.createElement(Ha.E,{font:"body-3"},t.channelTitle),n.createElement(Ha.E,{font:"body-3"},(0,fc.A)({seasonIndex:t.parentIndex,episodeIndex:t.index,noLeadingZero:!0,separator:" · ",includeSpecials:!0})))}return n.createElement(Ye.BJ,{align:"right",gap:"xxs",shrink:!1},l)}function vm({modalState:e,metadataItem:t,availabilities:a}){const l=(0,o.wA)(),i=(0,Fi.E)(),s=(0,Fi.E)(),c=(0,Fi.E)(),m=Bs(t),d=(0,Yt.A)(t.sourceURI),u=(0,o.d4)(T.A),y=(0,o.d4)(Cs.A),[p,f]=(0,n.useState)(),b=(0,n.useMemo)((()=>{var e;const t=ic(p)?null==(e=null==p?void 0:p.availabilities[0])?void 0:e.playableKey:null==p?void 0:p.availability.playableKey;return t?(0,st.A)(t):{serverIdentifier:"",providerIdentifier:""}}),[p]),A=!!b.providerIdentifier.length&&y.includes(b.providerIdentifier),g=(0,o.d4)((0,E.A)(b.serverIdentifier)),h=(0,o.d4)((0,v.A)(b.serverIdentifier,b.providerIdentifier)),I=(0,n.useMemo)((()=>function(e){const t={title:"Available to Stream",items:[]},a={title:"Buy / Rent",items:[]};return e.forEach((e=>{ic(e)||e.availability.offerType===ac.cX.Free||e.availability.offerType===ac.cX.Subscription?t.items.push(e):a.items.push(e)})),[t,a]}(a)),[a]),P=(0,n.useMemo)((()=>{if(p)return cc(p)}),[p]),S=(0,n.useCallback)((()=>{var e;if(!p||!P)return;const t=ic(p)?null==(e=p.availabilities[0])?void 0:e.Media:p.availability.Media;(null==t?void 0:t.length)?l(Bi.gC({serverEntityID:g.entityID,providerEntityID:h.entityID,metricsPage:r.Xt,options:{type:zi.G_,identifier:t[0].channelIdentifier}})):l((0,ls.oo)({pathname:P,replace:!1}))}),[l,p,h.entityID,g.entityID,P]),w=(0,n.useCallback)((()=>{s.onOpen()}),[s]);return(0,n.useEffect)((()=>{c.isOpen||f(void 0)}),[c.isOpen]),(0,n.useEffect)((()=>{var a;if(!p)return;let n;if(p.platform===ac.yy&&!A)return void c.onOpen();const o=cc(p),s=ic(p)?p.availabilities[0]:p;return m(s),p.platform===ac.yy?(null==(a=s.Media)?void 0:a.length)?l(Bi.gC({serverEntityID:g.entityID,providerEntityID:h.entityID,metricsPage:r.Xt,options:{type:zi.G_,identifier:s.Media[0].channelIdentifier}})):l((0,ls.oo)({pathname:o})):n=window.setTimeout((()=>{e.onClose(),window.open(o,"_blank","noopener,noreferrer"),f(void 0),!u.anonymous&&nc(s,t,d)&&i.onOpen()}),0),()=>{n&&window.clearTimeout(n)}}),[p]),n.createElement(n.Fragment,null,p?null:n.createElement(pc.aF,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},n.createElement(pc.$m,{closeButtonAccessibilityLabel:(0,j.A)("Close Availabilities modal"),title:t.title},n.createElement(pc.$8,null,I.map((({title:e,items:a},r)=>a.length>0?n.createElement(n.Fragment,{key:r},n.createElement("div",{className:pm.sectionTitle},n.createElement(Ha.E,null,e)),a.filter((e=>!ic(e)||e.isPlayable)).map(((e,a)=>n.createElement("div",{key:a,className:pm.availabilityContainer},n.createElement(pc.Ud,{item:e,onChooseItem:f},n.createElement("div",{className:pm.availabilityItemContent},n.createElement(Ye.BJ,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},n.createElement(Ye.BJ,{key:a,gap:"s",grow:!0,orientation:"horizontal",verticalAlign:"center"},n.createElement(jt.A,{className:pm.platformThumb,height:50,src:e.thumb,width:50}),n.createElement(Ha.E,{color:"primary",numberOfLines:2},oc(e))),n.createElement(fm,{item:e,metadataItem:t})))))))):null))),n.createElement(pc.jl,null,n.createElement(um.M,{leftButton:n.createElement(Jo.K0,{icon:dm.default,label:(0,j.A)("Choose your preferred services"),transparent:!0,onPress:w}),primaryButton:n.createElement(pc.s_,null,n.createElement(Jo.$n,{color:"accent",label:(0,j.A)("Done")}))})))),u.anonymous?null:n.createElement(mm,{metadataItem:t,modalState:i}),n.createElement(ym.A,{isOpen:s.isOpen,onClose:s.onClose}),b.providerIdentifier.length?n.createElement(rc.A,{modalState:c,providerIdentifier:b.providerIdentifier,onOptInFinished:S}):null)}var bm=a(13055),Am=a(26235),Em=a(77459);const gm=parseInt(fe.A.v4PagePadding,10);function hm(){return(0,Em.A)({columnWidth:parseInt(fe.A.v4PrePlayAvailabilityWidth,10),rowHeight:parseInt(fe.A.v4PrePlayAvailabilityHeight,10),innerHorizontalPadding:parseInt(fe.A.v4PrePlayAvailabilityGap,10),outerPaddingLeft:gm,outerPaddingRight:gm})}var Im=a(14200),Pm=a(97741),Sm=a(68635);const wm={hub:"PrePlayAvailabilityList-hub-lEPTuG VirtualHubScroller-hub-EpgwMo",hubHeader:"PrePlayAvailabilityList-hubHeader-Byc4ks VirtualHubScroller-hubHeader-vSW06t",placeholderCell:"PrePlayAvailabilityList-placeholderCell-Hy0NXK ListRowPlaceholder-placeholder-g75gnX",moreItemContainer:"PrePlayAvailabilityList-moreItemContainer-BAkOYq",zeroStateContainer:"PrePlayAvailabilityList-zeroStateContainer-JdTuhU",noSelectedServicesContainer:"PrePlayAvailabilityList-noSelectedServicesContainer-Yjn3ki",noSelectedServicesMoreItemContainer:"PrePlayAvailabilityList-noSelectedServicesMoreItemContainer-qBKfnd",noSelectedServicesTextContainer:"PrePlayAvailabilityList-noSelectedServicesTextContainer-k87pYu",iconPlaylist:"PrePlayAvailabilityList-iconPlaylist-xoEK8T",squareThumb:"PrePlayAvailabilityList-squareThumb-zhwrD2"};var Om=Object.defineProperty,Cm=Object.defineProperties,Rm=Object.getOwnPropertyDescriptors,Tm=Object.getOwnPropertySymbols,Mm=Object.prototype.hasOwnProperty,Dm=Object.prototype.propertyIsEnumerable,km=(e,t,a)=>t in e?Om(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,xm=(e,t)=>{for(var a in t||(t={}))Mm.call(t,a)&&km(e,a,t[a]);if(Tm)for(var a of Tm(t))Dm.call(t,a)&&km(e,a,t[a]);return e},Lm=(e,t)=>Cm(e,Rm(t)),jm=(e,t)=>{var a={};for(var n in e)Mm.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Tm)for(var n of Tm(e))t.indexOf(n)<0&&Dm.call(e,n)&&(a[n]=e[n]);return a};const Nm=6,Um=3,Fm=hm();function Bm(e){var t=e,{title:a,onPress:r}=t,l=jm(t,["title","onPress"]);const i=(0,Ee.A)(l);return n.createElement("div",{ref:i.cellRef,style:i.style},n.createElement(Hm,{title:a,onPress:r}))}function Hm({className:e=wm.moreItemContainer,title:t,onPress:a}){return n.createElement("div",{className:e},n.createElement(tc,{secondaryTitle:t,thumb:n.createElement("span",{className:wm.iconPlaylist},n.createElement(ws.default,{color:"inherit"})),onPress:a}))}function Vm(e){var t=jm(e,[]);const a=(0,Ee.A)(t),{cellIndex:r}=t;return n.createElement(Zt.A,{className:wm.placeholderCell,index:r,style:a.style})}function zm({metadataItem:e}){const t=(0,o.wA)(),a=(0,_i.A)(Wi.v.IncludeAvailabilities),r=(0,Fi.E)(),l=(0,Fi.E)(),[s,c]=(0,A.Ss)(),m=(0,o.d4)((0,Sn.A)(Ua.OB,Ua.uc(c.identifier))),d=(0,o.d4)(T.A),{availabilities:u,isPending:y,isPopulated:p,error:f}=(0,o.d4)((0,bm.A)(m,e.sourceURI)),v=(0,o.d4)(Cs.A),{services:b,isPopulated:E,isPending:g,error:h}=(0,o.d4)((0,Am.A)(m)),I=(0,n.useMemo)((()=>{return u.providerAvailabilities.filter((e=>!(e.availability.includeIfPreferred&&!b.includes(e.platform)||e.platform!==ac.yy&&!a||e.platform===ac.yy&&e.availability.playableKey&&!v.includes((0,st.A)(e.availability.playableKey).providerIdentifier)&&!d.isFullUser))).sort((e=b,function(t,a){if(t.availability.Media&&a.availability.Media)return(0,Im.A)(t.availability.Media,a.availability.Media);if(t.availability.platform===ac.yy&&a.availability.platform===ac.yy){if(t.availability.Media)return 1;if(a.availability.Media)return-1}else{if(a.availability.platform===ac.yy)return 1;if(t.availability.platform===ac.yy)return-1}if(t.availability.platform===a.availability.platform){if((0,Pm.A)(t.availability))return 1;if((0,Pm.A)(a.availability))return-1}const n=e.includes(a.availability.platform)?-1:1,r=e.includes(t.availability.platform)?-1:1;return r<n?-1:r>n?1:0})).reduce(((e,t)=>{if(t.availability.Media){if(t.availability.Media[0].onAir){const a=e.find((e=>ic(e)&&e.isPlayable));a?a.availabilities.push(t.availability):e.push({type:ac.Am.Provider,title:t.title,platform:t.platform,thumb:t.thumb,availabilities:[t.availability],isPlayable:!0})}else if(t.availability.Media){const a=e.find((e=>ic(e)&&!e.isPlayable));a?a.availabilities.push(t.availability):e.push({type:ac.Am.Provider,title:t.title,platform:t.platform,thumb:t.thumb,availabilities:[t.availability],isPlayable:!1})}}else e.push(t);return e}),[]);var e}),[u.providerAvailabilities,b,a,v,d.isFullUser]),P=(0,n.useMemo)((()=>{const e=Ua.uc(c.identifier),t=e!==Ua.p8.Production?`-${e}`:"";return I.filter((e=>ic(e)||e.availability.Media?v.includes(`${Ua.px}${t}`):e.platform===ac.yy?v.includes(`${Ua.IU}${t}`):b.includes(e.platform)))}),[I,c.identifier,b,v]),S=(0,n.useMemo)((()=>(b.length?P:I).slice(0,Um)),[I,P,b.length]),w=(0,n.useMemo)((()=>I.filter((e=>!S.includes(e)))),[I,S]),O=(0,n.useMemo)((()=>{const e=[...u.serverAvailabilities,...S];if(w.length){const t=w.length,a=1===t;((null==b?void 0:b.length)?a&&P.length===I.length:a)?e.push(I[Um]):0===e.length?e.push({type:ac.Am.More,title:t>1?(0,j.A)("Available on {count} other services",{count:t}):(0,j.A)("Available on 1 other service")}):e.push({type:ac.Am.More,title:(0,j.A)("+ {count} more",{count:t})})}return e}),[I,u.serverAvailabilities,w.length,P.length,S,null==b?void 0:b.length]);(0,n.useEffect)((()=>{!m||!a||g||E||h||t(Sm.Ay.actions.preferredServicesFetchRequested({server:s,provider:m}))}),[t,g,E,h,m,s,a]),(0,n.useEffect)((()=>{!m||a&&!E||y||p||f||t(Sm.Ay.actions.metadataItemAvailabilitiesFetchRequested({server:s,provider:m,metadataItem:e}))}),[t,f,y,p,E,e,m,s,a]),(0,n.useEffect)((()=>()=>{m&&(null==e?void 0:e.sourceURI)&&t(Sm.Ay.actions.metadataItemAvailabilitiesReset({provider:m,sourceURI:e.sourceURI}))}),[]);const C=(0,n.useCallback)((()=>{r.onOpen()}),[r]),R=(0,n.useCallback)((t=>{if(!t.item)return n.createElement(Vm,xm({},t));if((a=t.item)&&a.type===ac.Am.More)return n.createElement(Bm,Lm(xm({},t),{title:t.item.title,onPress:C}));var a;if(function(e){return!!e&&e.type===ac.Am.Server}(t.item)){const e=(0,st.A)(t.item.availability.source);return n.createElement(i.Ay,{column:t.cellIndex},n.createElement(A.Ay,{key:t.key,machineIdentifier:e.serverIdentifier,providerIdentifier:e.providerIdentifier},n.createElement(om,Lm(xm({},t),{metadataItem:t.item.availability}))))}return n.createElement(Zc,Lm(xm({},t),{addToWatchlistModalState:l,isAnonymousUser:d.anonymous,item:t.item,metadataItem:e}))}),[l,e,C,d.anonymous]),M=(0,n.useMemo)((()=>y?new Array(Nm):O),[y,O]),D=(0,n.useMemo)((()=>(0,Os.A)({items:M,title:s.isCloud?(0,j.A)("Watch from these locations"):(0,j.A)("More Ways to Watch"),type:se.A.Availability,context:`hub.${e.type}.moreWaysToWatch`})),[M,e.type,s.isCloud]);return!e.isUnreleased||p&&M.length?p&&!M.length?n.createElement("div",{className:wm.hub},n.createElement("div",{className:wm.hubHeader},n.createElement(Pe.A,null,D.title)),n.createElement("div",{className:wm.zeroStateContainer},n.createElement(Ha.E,{color:"muted",font:"inherit"},(0,j.A)("There are no locations currently available for this title.")))):n.createElement(n.Fragment,null,1===M.length&&M[0].type===ac.Am.More?n.createElement("div",{className:wm.hub},n.createElement("div",{className:wm.hubHeader},n.createElement(Pe.A,null,D.title)),n.createElement("div",{className:wm.noSelectedServicesContainer},n.createElement(Hm,{className:wm.noSelectedServicesMoreItemContainer,title:M[0].title,onPress:C}),n.createElement(Ye.BJ,{grow:!0,orientation:"horizontal",width:"100%"},n.createElement("div",{className:wm.noSelectedServicesTextContainer},n.createElement(Ha.E,{color:"muted",font:"inherit"},(0,j.A)("This item is not available on any of your selected services")))))):n.createElement(i.Ay,{name:D.context},n.createElement(Ll.A,{cellComponentFactory:R,className:wm.hub,hub:D,items:M,layout:Fm,totalSize:M.length})),d.anonymous?null:n.createElement(mm,{metadataItem:e,modalState:l}),n.createElement(vm,{availabilities:w,metadataItem:e,modalState:r})):null}var Wm=a(31576),Km=a(41218),Qm=a(961),qm=a(27728),$m=a(48397),Gm=a(83),Jm=a(91529),Xm=a(58383),_m=a(42287),Ym=a(57365),Zm=Object.defineProperty,ed=Object.defineProperties,td=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,nd=Object.prototype.hasOwnProperty,rd=Object.prototype.propertyIsEnumerable,ld=(e,t,a)=>t in e?Zm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,id=(e,t)=>{for(var a in t||(t={}))nd.call(t,a)&&ld(e,a,t[a]);if(ad)for(var a of ad(t))rd.call(t,a)&&ld(e,a,t[a]);return e},od=(e,t)=>ed(e,td(t)),sd=(e,t)=>{var a={};for(var n in e)nd.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&ad)for(var n of ad(e))t.indexOf(n)<0&&rd.call(e,n)&&(a[n]=e[n]);return a};const cd=25;function md({metadataItem:e}){const[t,a]=(0,A.Ss)(),{Review:r}=e,l=(0,n.useMemo)((()=>{var t;return null!=(t=(0,Ko.A)(e.guid))?t:""}),[e.guid]),{setting:i,isPending:o}=(0,Jm.A)(),{data:s,isLoading:c,isSuccess:m}=(0,as.Ks)({metadataID:l}),{data:d,isLoading:u,isSuccess:y}=(0,Ym.N7)({metadataID:l,type:_m.I2.Friends,first:cd}),{data:p,isLoading:f,isSuccess:v}=(0,Ym.N7)({metadataID:l,type:_m.I2.Hot,first:cd}),b=(0,n.useMemo)((()=>{var e,t;if(c||u||f||o)return new Array(cd).fill(null);if(m||y||v){const a=[...null!=(e=null==d?void 0:d.metadataReviews.nodes)?e:[]];(null==s?void 0:s.metadataReview)&&a.unshift(s.metadataReview);const n=[...null!=(t=null==p?void 0:p.metadataReviews.nodes)?t:[]],l=i!==Wm.Fg.Users?[...null!=r?r:[]]:[],o=function(e){const[t,a,n]=e,r=[],l=(e,...t)=>{for(const a of t){for(;r.length<e&&a.length>0;){const e=a.shift();e&&r.push(e)}if(r.length>=e)break}};return l(10,t),l(15,a),l(15,t),l(cd,n),l(cd,t,a),r.filter(Boolean)}([a,n,l]);return a.length+n.length+l.length>cd?[...o,{tagKey:Qm.R}]:o}return null!=r?r:[]}),[c,u,f,o,i,m,y,v,r,null==d?void 0:d.metadataReviews.nodes,null==s?void 0:s.metadataReview,null==p?void 0:p.metadataReviews.nodes]),E=(0,n.useMemo)((()=>(0,Os.A)({items:b})),[b]),g=(0,n.useMemo)(qm.A,[]),h=(0,n.useCallback)((r=>{return r.item?(l=r.item)&&("tag"in l||"tagKey"in l)?r.item.tagKey===Qm.R?n.createElement(Qm.A,od(id({},r),{href:(0,Xm.A)(t.machineIdentifier,a.identifier,{key:e.key})})):n.createElement($m.A,od(id({},r),{item:r.item})):n.createElement(Gm.A,od(id({},r),{item:r.item})):n.createElement(dd,id({},r));var l}),[e.key,a.identifier,t.machineIdentifier]);return n.createElement(Ll.A,{cellComponentFactory:h,hub:E,hubTitleComponent:ud,items:b,layout:g,totalSize:b.length})}function dd(e){var t=sd(e,[]);const a=(0,Ee.A)(t),{cellIndex:r}=t;return n.createElement(Zt.A,{index:r,style:id({},a.style)})}function ud(){const[e,t]=(0,A.Ss)(),a=(0,o.d4)(vo.A),r=a?(0,Xm.A)(e.machineIdentifier,t.identifier,{key:a.key}):void 0;return n.createElement(Pe.A,{href:r},(0,j.A)("Ratings & Reviews"))}const yd=function({metadataItem:e}){const t=(0,As.o)(cn.p6),{setting:a,isPending:r}=(0,Jm.A)();return t&&(r||a===Wm.Fg.None)?null:t&&a!==Wm.Fg.Critics?n.createElement(md,{metadataItem:e}):n.createElement(Km.A,{metadataItem:e})};var pd=a(55507);function fd({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,A.Ss)(),{audienceRating:r,contentRating:l,duration:i,originallyAvailableAt:o,rating:s,summary:c}=e,m=(0,nt.A)(e,"grandparentKey"),d=(0,nt.A)(e,"parentKey"),u=(0,xi.A)({useLongName:!0,episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0}),y=Fo(e),p=(0,Yt.A)(null==e?void 0:e.sourceURI),f=$a(e,"Director",2),v=$a(e,"Writer",2),b=(0,Ho.A)(e,p),E=(0,pd.A)(e),g=On(e),h=!!f||!!v,I=(0,_i.A)(Wi.v.IncludeDiscoverSource),P=(0,Bo.A)(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[d?n.createElement(at.N,{key:"parentTitle",color:"inherit",font:"inherit",href:d},e.parentTitle):e.parentTitle,u,b,E?n.createElement(Ha.E,{color:"accent",font:"inherit"},E):void 0],genres:[o?(0,Uo.A)(o):void 0,i?(0,B.A)(i):void 0,l?(0,H.A)(l):void 0],metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[s||r?n.createElement(V.A,{metadataItem:e}):null],showAttributionLogo:!0,socialProof:y?n.createElement(Is,{metadataItem:e}):null,starRating:n.createElement(rs,{metadataItem:e}),subtitle:(0,ot.A)(e),summary:c,title:m?n.createElement(at.N,{color:"inherit",font:"inherit",href:m},e.grandparentTitle):e.grandparentTitle},h||g?n.createElement(Ss,null,h?n.createElement(et,null,f?n.createElement(F.nT,{key:"directorTags",label:(0,j.A)("Directed by")},f):null,v?n.createElement(F.nT,{key:"writerTags",label:(0,j.A)("Written by")},v):null):null,g):null),(0,Vo.A)(e)?n.createElement(zm,{metadataItem:e}):null,n.createElement(Lo,{metadataItem:e}),n.createElement(yd,{metadataItem:e}),n.createElement(ja,{metadataItem:e}),a.isCloud||!I||P||e.Channel||!(0,zo.A)(e.guid)?null:n.createElement(zm,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var vd=a(16712),bd=a(44018),Ad=a(68800);function Ed({editionTitle:e}){return e?[n.createElement(vd.E,{key:"editionTitleBadge",accessibilityLabel:(0,j.A)("Edition {editionTitle}",{editionTitle:e}),label:e})]:[]}function gd({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,A.Ss)(),{audienceRating:r,contentRating:l,isUnreleased:i,rating:o,summary:s,year:c}=e,m=(0,pd.A)(e),d=Fo(e),u=$a(e,"Genre"),y=$a(e,"Director",3),p=On(e),f=function(e){const t=(0,Yt.A)(e.sourceURI);return(null==t?void 0:t.playableUntil)&&(0,yn.A)(e,t)?n.createElement(vd.E,{color:"accent",label:(0,Ad.A)(t.playableUntil)}):null}(e),v=(0,_i.A)(Wi.v.IncludeDiscoverSource),b=(0,Bo.A)(e);return n.createElement(n.Fragment,null,n.createElement(ie,{badges:Ed(e),buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isRentVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[m?n.createElement(Ha.E,{color:"accent",font:"inherit"},m):void 0,!i&&c?c:void 0,li(e),l?(0,H.A)(l):void 0,f],genres:u,metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[o||r?n.createElement(V.A,{key:"criticRating",metadataItem:e}):null],showAttributionLogo:!0,socialProof:d?n.createElement(Is,{metadataItem:e}):null,starRating:n.createElement(rs,{metadataItem:e}),subtitle:y?n.createElement(Ha.E,{as:"div",color:"muted",font:"body-3"},n.createElement(bd.A,{message:(0,j.A)("Directed by {director}"),tags:[{unpaired:"director",children:y}]})):null,summary:s,title:(0,ot.A)(e)},p?n.createElement(Ss,null,p):null),(0,Vo.A)(e)?n.createElement(zm,{metadataItem:e}):null,n.createElement(Lo,{metadataItem:e}),n.createElement(yd,{metadataItem:e}),n.createElement(Ql,null),n.createElement(ja,{metadataItem:e}),a.isCloud||!v||b||e.Channel||!(0,zo.A)(e.guid)?null:n.createElement(zm,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}var hd=a(78641),Id=a(62277),Pd=a(15494),Sd=a(55574),wd=a(54499),Od=a(13574),Cd=a(51721);function Rd(e,t){const a=e,n=t||Date.now(),r=(0,Cd.A)(n,a);if(1===r)return(0,j.A)("{ageInYears} year",{ageInYears:r});if(r>1)return(0,j.A)("{ageInYears} years",{ageInYears:r});const l=(0,Od.A)(n,a);if(1===l)return(0,j.A)("{ageInMonths} month",{ageInMonths:l});if(l>1)return(0,j.A)("{ageInMonths} months",{ageInMonths:l});const i=(0,wd.A)(n,a);return 1===i?(0,j.A)("{ageInDays} day",{ageInDays:i}):(0,j.A)("{ageInDays} days",{ageInDays:i})}var Td=a(57802),Md=a(43034),Dd=a(72379),kd=a(78880);const xd=(0,Mn.Mz)(ye.A,(e=>e.credits.groups.reduce(((e,t)=>(t.credits.forEach((t=>{(0,kd.jH)(t)&&(e.find((e=>e.type===t.item.type&&e.ratingKey===t.item.ratingKey))||e.push(t.item))})),e)),[]).sort(((e,t)=>{let a=e.year||0,n=t.year||0;return!a&&e.originallyAvailableAt&&(a=(0,Dd.A)(new Date(e.originallyAvailableAt))),!n&&t.originallyAvailableAt&&(n=(0,Dd.A)(new Date(t.originallyAvailableAt))),n-a}))));function Ld(){const e=(0,o.wA)(),{credits:{isPopulated:t,error:a},creditSources:{sourcesByGUID:r,isPending:l,isPopulated:i,error:s}}=(0,o.d4)(ye.A),c=(0,o.d4)(xd),m=(0,n.useMemo)((()=>c.map(Md.A).filter((e=>!(e in r)))),[c,r]);return(0,n.useEffect)((()=>{!m.length||!t||a||l||i||s||e(Da.A.actions.creditSourcesFetchRequested({guids:m}))}),[s,a,e,m,l,i,t]),t&&i?c.filter((e=>(0,Md.A)(e)in r)):[]}var jd=a(41731),Nd=Object.defineProperty,Ud=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,Bd=Object.getOwnPropertySymbols,Hd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,zd=(e,t,a)=>t in e?Nd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Wd=(e,t)=>{for(var a in t||(t={}))Hd.call(t,a)&&zd(e,a,t[a]);if(Bd)for(var a of Bd(t))Vd.call(t,a)&&zd(e,a,t[a]);return e},Kd=(e,t)=>Ud(e,Fd(t)),Qd=(e,t)=>{var a={};for(var n in e)Hd.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Bd)for(var n of Bd(e))t.indexOf(n)<0&&Vd.call(e,n)&&(a[n]=e[n]);return a};const qd=6;function $d(e){var t=Qd(e,[]);const a=(0,Ee.A)(t),{cellIndex:r}=t,l=(0,n.useMemo)((()=>(0,Mt.A)({width:t.cellWidth,aspectRatio:Tt.Yc})),[t.cellWidth]);return n.createElement(Zt.A,{index:r,style:Wd(Wd({},a.style),l)})}function Gd({metadataItem:e,onScrollPositionReady:t}){const[a,r]=(0,A.Ss)(),l=(0,o.wA)(),{credits:{isPending:i,isPopulated:s,error:c},creditSources:{sourcesByGUID:m,isPending:d,isPopulated:u,error:y}}=(0,o.d4)(ye.A),p=(0,o.d4)(Zn.A),f=Ld(),v=(0,n.useMemo)((()=>i||d?new Array(qd):f.reduce(((t,a)=>{const n=(0,Md.A)(a),r=(n?m[n]:null)||[],l=(0,jd.A)(e,r);return l.length&&t.push(l),t}),[])),[f,d,i,e,m]);(0,n.useEffect)((()=>{i||s||c||l(Da.A.actions.creditsFetchRequested({server:a,provider:r,metadataKey:e.key}))}),[c,l,i,s,e.key,r,a]),(0,n.useEffect)((()=>{(u||y)&&t()}),[y,u,t]);const b=(0,n.useCallback)((e=>{var t=e,{item:a}=t,r=Qd(t,["item"]);return a?n.createElement(_n.A,Kd(Wd({},r),{item:a[0]})):n.createElement($d,Wd({},r))}),[]),E=(0,n.useMemo)((()=>(0,Os.A)({items:v,title:(0,j.A)("Movies & Shows in Media Libraries")})),[v]),g=(0,n.useMemo)((()=>(0,xl.A)({columnWidth:p,listType:se.A.Mixed})),[p]);return c||y||s&&u&&0===f.length?null:n.createElement(k.Ay,{containerProvider:r,containerServer:a,containerSourceURI:e.sourceURI,containerType:se.A.Mixed,listStyle:se.T.CreditSource},n.createElement(Ll.A,{cellComponentFactory:b,hub:E,items:v,layout:g,totalSize:v.length}))}var Jd=a(50014),Xd=a.n(Jd);function _d(e,t){return t.filter((t=>(null==t?void 0:t.tagKey)===e.ratingKey||t.tag===e.title))}var Yd=a(82405),Zd=a(29264);const eu={placeholderCell:"PrePlayPersonMediaLibrariesHub-placeholderCell-QgGwce ListRowPlaceholder-placeholder-g75gnX"};var tu=Object.defineProperty,au=Object.defineProperties,nu=Object.getOwnPropertyDescriptors,ru=Object.getOwnPropertySymbols,lu=Object.prototype.hasOwnProperty,iu=Object.prototype.propertyIsEnumerable,ou=(e,t,a)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,su=(e,t)=>{for(var a in t||(t={}))lu.call(t,a)&&ou(e,a,t[a]);if(ru)for(var a of ru(t))iu.call(t,a)&&ou(e,a,t[a]);return e},cu=(e,t)=>au(e,nu(t)),mu=(e,t)=>{var a={};for(var n in e)lu.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&ru)for(var n of ru(e))t.indexOf(n)<0&&iu.call(e,n)&&(a[n]=e[n]);return a};const du=6,uu=hm();function yu(e){var t=e,{person:a,item:r}=t,l=mu(t,["person","item"]);const[i,o]=(0,A.Ss)(),s=(0,Ee.A)(l),c=(0,n.useMemo)((()=>{const e=_d(a,(null==r?void 0:r.tags)||[]);return(0,Zd.A)(i,o,e,String(null==r?void 0:r.librarySectionID))}),[null==r?void 0:r.librarySectionID,null==r?void 0:r.tags,a,o,i]);return n.createElement("div",{ref:s.cellRef,style:s.style},n.createElement(tc,{href:c,primaryTitle:i.friendlyName,secondaryTitle:null==r?void 0:r.librarySectionTitle,thumb:n.createElement(nm,null)}))}function pu(e){var t=mu(e,[]);const a=(0,Ee.A)(t),{cellIndex:r}=t;return n.createElement(Zt.A,{className:eu.placeholderCell,index:r,style:a.style})}function fu({metadataItem:e,onScrollPositionReady:t}){const[a,r]=(0,A.Ss)(),l=Ld(),{credits:{isPending:i,isPopulated:s,error:c},creditSources:{sourcesByGUID:m,isPending:d,isPopulated:u,error:y}}=(0,o.d4)(ye.A),p=(0,o.d4)(Yd.A),f=(0,n.useMemo)((()=>i||d?new Array(du):l.map(Md.A).flatMap((e=>m[e])).filter(Boolean).reduce(((t,a)=>{const n=(0,st.A)(a.source),r=function(e,t){return _d(e,[...t.Director||[],...t.Producer||[],...t.Role||[],...t.Writer||[]])}(e,a);if(!(a.librarySectionID&&a.librarySectionTitle&&n.isServer&&r.length))return t;const l=t.find((e=>e.librarySectionID===a.librarySectionID&&e.source===a.source));return l?l.tags=Xd()([...l.tags,...r],"filter"):t.push({source:a.source,librarySectionID:a.librarySectionID,librarySectionTitle:a.librarySectionTitle,tags:r}),t}),[]).sort(function(e){return(t,a)=>{var n;const r=e.find((e=>e.machineIdentifier===(0,st.A)(t.source).serverIdentifier)),l=e.find((e=>e.machineIdentifier===(0,st.A)(a.source).serverIdentifier));return r&&l?r.isFullOwnedServer&&!l.isFullOwnedServer?-1:!r.isFullOwnedServer&&l.isFullOwnedServer?1:r.friendlyName===l.friendlyName?null==(n=t.librarySectionTitle)?void 0:n.localeCompare(a.librarySectionTitle||""):r.friendlyName.localeCompare(l.friendlyName):0}}(p))),[l,d,i,e,p,m]);(0,n.useEffect)((()=>{(u||y)&&t()}),[y,u,t]);const v=(0,n.useCallback)((t=>{var a=t,{item:r}=a,l=mu(a,["item"]);if(!r)return n.createElement(pu,su({},l));const i=(0,st.A)(r.source);return n.createElement(A.Ay,{key:l.key,machineIdentifier:i.serverIdentifier,providerIdentifier:i.providerIdentifier},n.createElement(yu,cu(su({},l),{item:r,person:e})))}),[e]),b=(0,n.useMemo)((()=>(0,Os.A)({items:f,title:(0,j.A)("Media Libraries")})),[f]);return c||y||s&&u&&0===l.length?null:n.createElement(k.Ay,{containerProvider:r,containerServer:a,containerSourceURI:e.sourceURI,containerType:se.A.Mixed,listStyle:se.T.CreditSource},n.createElement(Ll.A,{cellComponentFactory:v,hub:b,items:f,layout:uu,totalSize:f.length}))}var vu=a(3986),bu=a(78966),Au=a(20761),Eu=a(54433),gu=a(69331);const hu={container:"PersonCredits-container-t2aTHW",year:"PersonCredits-year-OKLD9R",link:"PersonCredits-link-goFy2o Link-link-vSsQW1"};function Iu({metadataItem:e}){const t=(0,o.wA)(),[a,r]=(0,A.Ss)(),l=(0,Fi.E)(),i=(0,o.d4)(gu.A),s=(0,o.d4)(Cs.A),{creditSources:{sourcesByGUID:c}}=(0,o.d4)(ye.A),m=s.includes(Ua.IU),d=c[(0,Md.A)(e)],u=(null==d?void 0:d.length)?(0,st.A)(d[0].source):null,y=(0,o.d4)((0,E.A)((null==u?void 0:u.serverIdentifier)||""));let p=null,f=null;if(null==d?void 0:d.length)p=(0,j.A)("On {sourceName}",{sourceName:y.friendlyName}),d.length>1&&(p+=" +"+(d.length-1)),f=(0,sc.A)(a.machineIdentifier,r.identifier,{key:e.key});else if(e.playableKey){const t=(0,st.A)(e.playableKey);p=(0,j.A)("On Plex"),f=(0,sc.A)(Au.Q,Ua.IU,{key:t.key})}const v=(0,n.useCallback)((()=>{f&&t((0,ls.oo)({pathname:f,replace:!1}))}),[t,f]);return p&&f&&((null==d?void 0:d.length)||m||!i)?n.createElement(Ye.BJ,{shrink:!1},(null==d?void 0:d.length)||!e.playableKey||m?n.createElement(at.N,{color:"accent",font:"body-2",href:f},p):n.createElement(Jo.QW,{color:"accent",font:"body-2",onPress:l.onOpen},p),n.createElement(rc.A,{modalState:l,providerIdentifier:Ua.IU,onOptInFinished:v})):null}function Pu({metadataItem:e,role:t,type:a}){return n.createElement(Ye.BJ,{gap:"m",orientation:"horizontal",verticalAlign:"top"},n.createElement(Ha.E,{color:"muted",font:"body-2",shrink:!1},n.createElement(Eu.A,{className:hu.year,metadataItem:e})),n.createElement(Ha.E,{color:"muted",font:"body-2"},n.createElement(Et.A,{className:hu.link,metadataItem:e}),t?n.createElement(n.Fragment,null,n.createElement(ht.A,{separator:"•"}),a===f.Tq.Actor||a===f.Tq.Appeared?(0,j.A)("as {role}",{role:t}):t):null),n.createElement(Iu,{metadataItem:e}))}function Su({metadataItem:e}){const[t,a]=(0,A.Ss)(),{key:r}=e,l=(0,o.wA)(),i=(0,o.d4)(gu.A),{credits:{groups:s,isPopulated:c,error:m}}=(0,o.d4)(ye.A);return Ld(),(0,n.useEffect)((()=>{i||c||m||!t||!a||l(Da.A.actions.creditsFetchRequested({server:t,provider:a,metadataKey:r}))}),[m,l,c,i,r,a,t]),i||m||0===s.length?null:n.createElement("div",{className:hu.container},n.createElement(Ye.BJ,{gap:"l"},n.createElement(Pe.A,null,(0,j.A)("Filmography")),c?n.createElement(bu.tU,{defaultValue:s[0].type},n.createElement(bu.j7,{align:"left",tabStyle:"primary"},s.map((({type:e,title:t,credits:a})=>n.createElement(bu.KM,{key:e,value:e},`${t} (${a.length})`)))),s.map((({type:e,credits:t})=>n.createElement(bu.av,{key:e,value:e},n.createElement(Ye.BJ,{gap:"s"},t.map((t=>(0,kd.jH)(t)?n.createElement(Pu,{key:t.item.key,metadataItem:t.item,role:t.role,type:e}):null))))))):n.createElement(Ye.BJ,{align:"center",height:(0,Es.A)("xxxl"),orientation:"horizontal",verticalAlign:"center"},n.createElement(vu.y,null))))}var wu=a(91390);function Ou(e){const{bornAt:t,diedAt:a}=e;if(!t)return null;const n=a?void 0:Rd(t,Date.now()),r=(0,Uo.A)(t);return n?`${r} (${n})`:r}function Cu(e){const{bornAt:t,diedAt:a}=e;if(!a)return null;const n=t?Rd(t,a):void 0,r=(0,Uo.A)(a);return n?`${r} (${n})`:r}function Ru(e){switch(e){case f.bs.Facebook:return hd.default;case f.bs.Instagram:return Id.default;case f.bs.Twitter:return Pd.default}}function Tu({metadataItem:e,onScrollPositionReady:t}){const{summary:a,bornAt:r,diedAt:l,External:i,CreditType:o}=e,s=(0,wu.A)(),c=null==o?void 0:o.slice(0,2).map((({title:e})=>e)).join(", ");return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(Ye.BJ,{align:["center","left"],gap:"m",orientation:"horizontal",wrap:!1},null==i?void 0:i.map((e=>n.createElement(Sd.m,{key:`${e.source}${e.id}`,tooltip:n.createElement(Ye.BJ,{align:"center"},n.createElement(Ha.E,{color:"primary",font:"body-2"},e.sourceTitle),n.createElement(Ha.E,{color:"muted",font:"body-2"},"@",e.id))},n.createElement(Jo.AR,{accessibilityLabel:e.sourceTitle,href:e.url,icon:Ru(e.source),rel:"noopener noreferrer nofollow",size:"s",target:"_blank"}))))),facts:r?[(0,j.A)("Born"),Ou(e)]:void 0,genres:l?[(0,j.A)("Died"),Cu(e)]:void 0,metadataItem:e,poster:n.createElement(Td.A,{metadataItem:e,width:s}),subtitle:c,summary:a,title:(0,ot.A)(e)}),n.createElement(Gd,{metadataItem:e,onScrollPositionReady:t}),n.createElement(fu,{metadataItem:e,onScrollPositionReady:t}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}),n.createElement(Su,{metadataItem:e}))}function Mu({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,A.Ss)(),{audienceRating:r,rating:l,summary:i}=e,o=Fo(e),s=(0,pd.A)(e),c=On(e),m=(0,_i.A)(Wi.v.IncludeDiscoverSource),d=(0,Bo.A)(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[s?n.createElement(Ha.E,{color:"accent",font:"inherit"},s):void 0],metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[l||r?n.createElement(V.A,{metadataItem:e}):null],showAttributionLogo:!0,socialProof:o?n.createElement(Is,{metadataItem:e}):null,starRating:n.createElement(rs,{metadataItem:e}),subtitle:(0,ot.A)(e),summary:i,title:n.createElement(rt,{metadataItem:e})},c),(0,Vo.A)(e)?n.createElement(zm,{metadataItem:e}):null,n.createElement(Lo,{metadataItem:e}),n.createElement(yd,{metadataItem:e}),n.createElement(kl,{metadataItem:e}),!a.isCloud&&m&&!d&&(0,zo.A)(e.guid)?n.createElement(zm,{metadataItem:e}):null,n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}function Du({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,A.Ss)(),{audienceRating:r,contentRating:l,isUnreleased:i,rating:o,summary:s,year:c}=e,m=Fo(e),d=(0,pd.A)(e),u=$a(e,"Genre"),y=(0,_i.A)(Wi.v.IncludeDiscoverSource),p=(0,Bo.A)(e);return n.createElement(n.Fragment,null,n.createElement(ie,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[d?n.createElement(Ha.E,{color:"accent",font:"inherit"},d):void 0,!i&&c?c:void 0],genres:u,metadataItem:e,poster:n.createElement(it.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[l?(0,H.A)(l):void 0,o||r?n.createElement(V.A,{key:"criticRating",metadataItem:e}):null],showAttributionLogo:!0,socialProof:m?n.createElement(Is,{metadataItem:e}):null,starRating:n.createElement(rs,{metadataItem:e}),summary:s,title:(0,ot.A)(e)}),(0,Vo.A)(e)?n.createElement(zm,{metadataItem:e}):null,n.createElement(kl,{metadataItem:e}),n.createElement(Lo,{metadataItem:e}),n.createElement(yd,{metadataItem:e}),n.createElement(Ql,null),a.isCloud||!y||p||e.Channel||!(0,zo.A)(e.guid)?null:n.createElement(zm,{metadataItem:e}),n.createElement(Ba,{metadataItem:e,onScrollPositionReady:t}))}const ku=(0,n.memo)((function({metadataItem:e,onScrollPositionReady:t}){const a=function(e){const{type:t,subtype:a}=e;if((0,N.A)(e))switch(t){case f.QD.Movie:return jo;case f.QD.Show:return No;case f.QD.Episode:return so}if(a===f.i9.Clip&&t===f.QD.Movie)return ii;switch(t){case f.QD.Movie:return gd;case f.QD.Show:return Du;case f.QD.Season:return Mu;case f.QD.Episode:return fd;case f.QD.Artist:case f.QD.Author:return ri;case f.QD.Album:case f.QD.Audiobook:return Cn;case f.QD.Collection:return ki;case f.QD.Person:return Tu}}(e);return a?n.createElement(a,{metadataItem:e,onScrollPositionReady:t}):n.createElement(U.A,{description:(0,j.A)("Pardon our dust. This item is lacking a details page."),title:(0,j.A)("Missing details")})})),xu={prePlayContentWrapper:"PrePlayPageContent-prePlayContentWrapper-Zi1xEP"};var Lu=Object.defineProperty,ju=Object.getOwnPropertySymbols,Nu=Object.prototype.hasOwnProperty,Uu=Object.prototype.propertyIsEnumerable,Fu=(e,t,a)=>t in e?Lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Bu=(e,t)=>{for(var a in t||(t={}))Nu.call(t,a)&&Fu(e,a,t[a]);if(ju)for(var a of ju(t))Uu.call(t,a)&&Fu(e,a,t[a]);return e};function Hu({metadataItem:e}){const[t,a]=(0,A.Ss)(),[r,{height:l}]=(0,D.A)(),[i,{width:o,height:s}]=(0,D.A)(),[c,m]=(0,n.useState)({scrollTop:0,scrollLeft:0}),[d,u]=(0,n.useState)(),y=(0,n.useCallback)((e=>{m(e)}),[]),p=(0,n.useCallback)((e=>{u(e)}),[]),{scrollRestoreProps:f,onScrollPositionReady:v}=(0,L.A)({key:"PrePlayPageContent",onScrollPositionChange:y});return(0,n.useEffect)((()=>{null!=d&&u(void 0)}),[d]),n.createElement(k.Ay,{containerProvider:a,containerServer:t,containerSourceURI:e.sourceURI,containerSubtype:e.subtype,containerType:e.type},n.createElement(x.A,Bu(Bu({ref:r,skipScrollRestore:!0},f),d),n.createElement("div",{ref:i,className:xu.prePlayContentWrapper},n.createElement(q,{contentHeight:s,height:l,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop,width:o,onRequestScrollPosition:p},n.createElement(ku,{metadataItem:e,onScrollPositionReady:v})))))}var Vu=a(25364),zu=a(35456),Wu=a(26340);function Ku({machineIdentifier:e,providerIdentifier:t,metadataKey:a}){const r=(0,o.wA)(),i=(0,s.W6)(),D=(0,l.A)(),k=(0,m.A)(D.wl),x=(0,o.d4)(T.A),L=(0,o.d4)((0,E.A)(e)),j=(0,o.d4)((0,v.A)(e,t)),{metadata:{metadataItem:N,error:U,isPopulated:F}}=(0,o.d4)(ye.A),B=(0,ue.A)(),H=N?(0,b.A)({provider:j,librarySectionID:N.librarySectionID,isPlaylist:N.isPlaylist}):void 0,V=(0,Wu.A)(L,j,a),z=(0,o.d4)((0,R.A)("playThemeMusic")),W=(0,o.d4)(c.A),K=a===(null==N?void 0:N.key)&&(!B||B.isPopulated),Q=!(!U&&!(null==B?void 0:B.error));return(0,zu.A)(e,t),(0,g.A)({identifier:j.metricsIdentifier,type:null==N?void 0:N.type,metadataItem:(0,h.A)(N)},F),(0,n.useEffect)((()=>{x.anonymous&&k&&i.push(d.A.join(ps.A.login,{redirectUrl:window.location.hash.replace("#!","")}))}),[i,x.anonymous,k]),(0,n.useEffect)((()=>{if(!N||!z)return;const e=N.grandparentTheme||N.parentTheme||N.theme;r((0,y.pk)({serverEntityID:L.entityID,providerEntityID:j.entityID,theme:e}))}),[r,N,z,j.entityID,L.entityID]),(0,n.useEffect)((()=>{N&&W&&r((0,u.iZ)({server:L,provider:j,metadataItem:N,metadataItemState:V,legacyAction:(0,p.g$)()}))}),[r,W,N,V,j,L]),L.isCloud&&(null==N?void 0:N.isAdult)&&(null==N?void 0:N.type)!==f.QD.Person?n.createElement(I.A,null,n.createElement(S.A,null)):n.createElement(A.Ay,{contentDirectoryID:null==H?void 0:H.id,machineIdentifier:e,providerIdentifier:t},n.createElement(I.A,{scrollDirection:O.D.None},n.createElement(Vu.A,null),N&&K?n.createElement(M.A,{metadataItem:N,skipFetch:!1},n.createElement(Hu,{metadataItem:N})):null,N&&K||!Q?null:n.createElement(w.A,null),N&&K||Q?null:n.createElement(P.A,null,n.createElement(C.A,null))))}var Qu=a(4627),qu=a(57122),$u=a(54863),Gu=a(4370),Ju=Object.defineProperty,Xu=Object.defineProperties,_u=Object.getOwnPropertyDescriptors,Yu=Object.getOwnPropertySymbols,Zu=Object.prototype.hasOwnProperty,ey=Object.prototype.propertyIsEnumerable,ty=(e,t,a)=>t in e?Ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ay=(e,t)=>{for(var a in t||(t={}))Zu.call(t,a)&&ty(e,a,t[a]);if(Yu)for(var a of Yu(t))ey.call(t,a)&&ty(e,a,t[a]);return e},ny=(e,t)=>Xu(e,_u(t));function ry({page:e=Ku}){const{machineIdentifier:t,providerIdentifier:a}=(0,Qu.A)(),o=(0,l.A)(),s=(0,qu.A)(o.key);return n.createElement($u.A,{machineIdentifier:t,providerIdentifier:a},s?n.createElement(i.Ay,{metricsContextParam:(0,qu.A)(o.context),metricsPage:r.Xt},n.createElement(e,ny(ay({},o),{machineIdentifier:t,metadataKey:s,providerIdentifier:a}))):n.createElement(Gu.A,null))}}}]);